function t(t){this.value=null,this.next=null,this.prev=null,this.list=null}function e(){this.head=null,this.tail=null,this.length=0}t.create=function(e){let n=new t;return n.value=e,n},t.prototype.free=function(){let t=this.value;return this.unlink(),this.next=this.prev=null,this.list=null,this.value=null,t},t.prototype.linkAfter=function(t,e){return this.next=null!==t?t.next:null,this.prev=t,this.list=e,null!==t&&(null!==t.next&&(t.next.prev=this),t.next=this),e.tail===t&&(e.tail=this),null===e.head&&(e.head=this),e.length++,this},t.prototype.linkBefore=function(t,e){return this.prev=null!==t?t.prev:null,this.next=t,this.list=e,null!==t&&(null!==t.prev&&(t.prev.next=this),t.prev=this),e.head===t&&(e.head=this),null===e.tail&&(e.tail=this),e.length++,this},t.prototype.unlink=function(){return this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.list.head===this&&(this.list.head=this.next),this.list.tail===this&&(this.list.tail=this.prev),this.list.length--,this},e.create=function(){return new e},e.prototype.free=function(){this.clear()},e.prototype.reset=function(){for(;null!==this.head;)this.head.free();return this},e.prototype.clear=function(){for(;null!==this.head;)null!==this.head.value&&this.head.value.free(),this.head.free();return this},e.prototype.first=function(){return null!==this.head?this.head.value:null},e.prototype.last=function(){return null!==this.tail?this.tail.value:null},e.prototype.find=function(t){for(let e=this.head;null!==e;e=e.next)if(e.value===t)return e;return null},e.prototype.unshift=function(e){return t.create(e).linkBefore(this.head,this),e},e.prototype.shift=function(){return null===this.head?null:this.head.free()},e.prototype.push=function(e){return t.create(e).linkAfter(this.tail,this),e},e.prototype.pop=function(){return null===this.tail?null:this.tail.free()};let n=null,i=!1,l=e.create(),r=!1;function s(t){if(!0===t.isPropagating)return;t.isPropagating=!0;let n=t.watchers;for(t.watchers=e.create();n.length;)n.shift()();n.free(),t.isPropagating=!1}function u(){for(r=!1,i=!0;l.length;)s(l.shift());i=!1}function h(t=null){const h={watchers:e.create(),value:t,isPropagating:!1,wasQueued:!1};return h.accessor=t=>function(t,e){return void 0===e?(null!==n&&null===t.watchers.find(n)&&t.watchers.push(n),t.value):t.value===e?t.accessor:(t.previousValue=t.value,t.value=e,!0===i?(t.isPropagating||!1===t.wasQueued&&(l.push(t),t.wasQueued=!0,!1===r&&(queueMicrotask(u),r=!0)),t.accessor):(i=!0,s(t),i=!1,t.accessor))}(h,t),h.accessor}function a(t,e=null){let i=null,l=!1;const r=function(){!0!==l&&(l=!0,i=n,n=r,t(),n=i,l=!1)};return r.id=e,r(),r}function o(t,e){return e instanceof Node||(e=document.createTextNode(e)),t.replaceWith(e),e}export{h as signal,a as effect,o as replaceNode};
//# sourceMappingURL=riza.js.map
