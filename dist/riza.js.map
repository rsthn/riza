{"mappings":"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","sources":["src/router.js","src/element.js","src/api.js","src/data-source.js","src/data-list.js","src/easing.js","src/anim.js","src/elems/r-tabs.js","src/elems/r-form.js","src/elems/r-panel.js","src/elems/r-list.js","src/elems/r-item.js","src/elems/r-paginator.js","src/elems/r-table.js","src/elems/r-select.js","src/utils.js","src/elems/r-image-cropper.js","src/main.js","src/elements.js"],"sourcesContent":["/*\r\n**\triza/router\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport { EventDispatcher } from 'rinn';\r\n\r\n/*\r\n**\tThe Router is a special module that detects local URL changes (when a hash-change occurs) and\r\n**\tforwards events to the appropriate handlers.\r\n*/\r\n\r\nconst _Router =\r\n{\r\n\tRoute: EventDispatcher.extend\r\n\t({\r\n\t\t/*\r\n\t\t**\tRegular expression for the route. This is generated from a simpler expression provided\r\n\t\t**\tin the constructor.\r\n\t\t*/\r\n\t\trouteRegex: null,\r\n\r\n\t\t/*\r\n\t\t**\tOriginal route string value.\r\n\t\t*/\r\n\t\tvalue: null,\r\n\r\n\t\t/*\r\n\t\t**\tMap with the indices and the names of each paremeter obtained from the route expression.\r\n\t\t*/\r\n\t\tparams: null,\r\n\r\n\t\t/*\r\n\t\t**\tArguments obtained from the current route (uses `params` to determine name of arguments).\r\n\t\t*/\r\n\t\targs: null,\r\n\r\n\t\t/*\r\n\t\t**\tArguments string obtained from the last route dispatch. Used to check if the arguments changed.\r\n\t\t*/\r\n\t\ts_args: null,\r\n\r\n\t\t/*\r\n\t\t**\tIndicates if the route is active because of a past positive dispatch.\r\n\t\t*/\r\n\t\tactive: false,\r\n\r\n\t\t/*\r\n\t\t**\tIndicates if the params have changed since last event. Transition from inactive to active route will always set this value to true.\r\n\t\t*/\r\n\t\tchanged: false,\r\n\r\n\t\t/*\r\n\t\t**\tConstructor of the route, the specified argument is a route expression.\r\n\t\t**\r\n\t\t**\t>> void __ctor (string route);\r\n\t\t*/\r\n\t\t__ctor: function (route)\r\n\t\t{\r\n\t\t\tthis._super.EventDispatcher.__ctor();\r\n\t\t\tthis._compileRoute (this.value = route);\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t**\tTransforms the specified route expression into a regular expression and a set of parameter\r\n\t\t**\tnames and stores them in the 'param' array.\r\n\t\t**\r\n\t\t**\t>> void _compileRoute (string route);\r\n\t\t*/\r\n\t\t_compileRoute: function (route)\r\n\t\t{\r\n\t\t\tthis.params = [];\r\n\r\n\t\t\troute = route.replace(/\\/\\*\\//g, '/.+/');\r\n\r\n\t\t\twhile (true)\r\n\t\t\t{\r\n\t\t\t\tvar m = /:([!@A-Za-z0-9_-]+)/.exec(route);\r\n\t\t\t\tif (!m) break;\r\n\t\r\n\t\t\t\troute = route.replace(m[0], '([^/]+)');\r\n\t\t\t\tthis.params.push (m[1]);\r\n\t\t\t}\r\n\r\n\t\t\tthis.routeRegex = '^' + route.replace(/##/g, '');\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t**\tAdds a handler to the route dispatcher. The handler can be removed later using removeHandler and\r\n\t\t**\tspecifying the same parameters. If unrouted boolean is specified the event to listen to will be\r\n\t\t**\tthe unrouted event (when the route changes and the route is not activated).\r\n\t\t**\r\n\t\t**\tvoid addHandler (handler: function, unrouted: bool);\r\n\t\t*/\r\n\t\taddHandler: function (handler, unrouted)\r\n\t\t{\r\n\t\t\tthis.addEventListener ((unrouted === true ? 'un' : '') + 'routed', handler, null);\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t**\tRemoves a handler from the route dispatcher.\r\n\t\t**\r\n\t\t**\tvoid removeHandler (handler: function, unrouted: bool);\r\n\t\t*/\r\n\t\tremoveHandler: function (handler, unrouted)\r\n\t\t{\r\n\t\t\tthis.removeEventListener ((unrouted === true ? 'un' : '') + 'routed', handler, null);\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t**\tVerifies if the specified route matches the internal route and if so dispatches a (depends on doUnroute parameter) \"routed\" or \"unrouted\" event with the\r\n\t\t**\tparameters obtained from the location to all attached handlers.\r\n\t\t**\r\n\t\t**\tvoid dispatch (route:string, doUnroute:bool);\r\n\t\t*/\r\n\t\tdispatch: function (route)\r\n\t\t{\r\n\t\t\tvar matches = route.match(this.routeRegex);\r\n\t\t\tif (!matches)\r\n\t\t\t{\r\n\t\t\t\tthis.s_args = null;\r\n\r\n\t\t\t\tif (this.active)\r\n\t\t\t\t\tthis.dispatchEvent ('unrouted', { route: this });\r\n\r\n\t\t\t\tthis.active = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar args = { route: this };\r\n\t\t\tvar str = '';\r\n\r\n\t\t\tfor (var i = 0; i < this.params.length; i++)\r\n\t\t\t{\r\n\t\t\t\targs[this.params[i]] = matches[i+1];\r\n\t\t\t\tstr += '_' + matches[i+1];\r\n\t\t\t}\r\n\r\n\t\t\tthis.changed = str != this.s_args;\r\n\t\t\tthis.s_args = str;\r\n\r\n\t\t\tthis.dispatchEvent ('routed', this.args = args);\r\n\t\t\tthis.active = true;\r\n\t\t}\r\n\t}),\r\n\r\n\t/*\r\n\t**\tMap with route objects. The key of the map is the route and the value a handler.\r\n\t*/\r\n\troutes: { },\r\n\r\n\t/*\r\n\t**\tSorted list of routes. Smaller routes are processed first than larger ones. This array stores\r\n\t**\tonly the keys to the Router.routes map.\r\n\t*/\r\n\tsortedRoutes: [ ],\r\n\r\n\t/*\r\n\t**\tIndicates the number of times the onLocationChanged handler should ignore the hash change event.\r\n\t*/\r\n\tignoreHashChangeEvent: 0,\r\n\r\n\t/*\r\n\t**\tCurrent relative location (everything after the location hash symbol).\r\n\t*/\r\n\tlocation: '',\r\n\r\n\t/*\r\n\t**\tCurrent relative location as an array of elements (obtained by splitting the location by slash).\r\n\t*/\r\n\targs: [],\r\n\r\n\t/*\r\n\t**\tInitializes the router module. Ensure to call `refresh` once to force a hashchange when the page loads.\r\n\t*/\r\n\tinit: function ()\r\n\t{\r\n\t\tif (this.alreadyAttached)\r\n\t\t\treturn;\r\n\r\n\t\tthis.alreadyAttached = true;\r\n\r\n\t\tif ('onhashchange' in globalThis)\r\n\t\t\tglobalThis.onhashchange = this.onLocationChanged.bind(this);\r\n\t},\r\n\r\n\t/*\r\n\t**\tRefreshes the current route by forcing a hashchange event.\r\n\t*/\r\n\trefresh: function ()\r\n\t{\r\n\t\tthis.onLocationChanged();\r\n\t},\r\n\r\n\t/*\r\n\t**\tChanges the current location and optionally prevents a trigger of the hashchange event.\r\n\t*/\r\n\tsetRoute: function (route, silent)\r\n\t{\r\n\t\tvar location = this.realLocation (route);\r\n\t\tif (location == this.location) return;\r\n\r\n\t\tif (silent) this.ignoreHashChangeEvent++;\r\n\t\tglobalThis.location.hash = location;\r\n\t},\r\n\r\n\t/*\r\n\t**\tAdds the specified route to the routing map. When the specified route is detected, the `onRoute` handler will be called, and then\r\n\t**\twhen the route exits `onUnroute` will be called.\r\n\t*/\r\n\taddRoute: function (route, onRoute, onUnroute)\r\n\t{\r\n\t\tif (!this.routes[route])\r\n\t\t{\r\n\t\t\tthis.routes[route] = new this.Route (route);\r\n\t\t\tthis.sortedRoutes.push (route);\r\n\r\n\t\t\tthis.sortedRoutes.sort ((a, b) => {\r\n\t\t\t\treturn this.routes[a].routeRegex.length - this.routes[b].routeRegex.length;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (onUnroute !== undefined)\r\n\t\t{\r\n\t\t\tthis.routes[route].addHandler (onRoute, false);\r\n\t\t\tthis.routes[route].addHandler (onUnroute, true);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.routes[route].addHandler (onRoute, false);\r\n\r\n\t\treturn this.routes[route];\r\n\t},\r\n\r\n\t/*\r\n\t**\tAdds the specified routes to the routing map. The routes map should contain the route expression\r\n\t**\tin the key of the map and a handler function in the value.\r\n\t*/\r\n\taddRoutes: function (routes)\r\n\t{\r\n\t\tfor (var i in routes)\r\n\t\t{\r\n\t\t\tif (!this.routes[i])\r\n\t\t\t{\r\n\t\t\t\tthis.routes[i] = new this.Route (i);\r\n\t\t\t\tthis.sortedRoutes.push (i);\r\n\t\t\t}\r\n\r\n\t\t\tthis.routes[i].addHandler (routes[i], false);\r\n\t\t}\r\n\r\n\t\tthis.sortedRoutes.sort ((a, b) => {\r\n\t\t\treturn this.routes[a].routeRegex.length - this.routes[b].routeRegex.length;\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\t**\tRemoves the specified route from the routing map.\r\n\t*/\r\n\tremoveRoute: function (route, onRoute, onUnroute)\r\n\t{\r\n\t\tif (!this.routes[route]) return;\r\n\r\n\t\tif (onUnroute !== undefined)\r\n\t\t{\r\n\t\t\tthis.routes[route].removeHandler (onRoute, false);\r\n\t\t\tthis.routes[route].removeHandler (onUnroute, true);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.routes[route].removeHandler (onRoute);\r\n\t},\r\n\r\n\t/*\r\n\t**\tRemoves the specified routes from the routing map. The routes map should contain the route\r\n\t**\texpression in the key of the map and a handler function in the value.\r\n\t*/\r\n\tremoveRoutes: function (routes)\r\n\t{\r\n\t\tfor (var i in routes)\r\n\t\t{\r\n\t\t\tif (!this.routes[i]) continue;\r\n\r\n\t\t\tthis.routes[i].removeHandler (routes[i]);\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t**\tGiven a formatted location and a previous one it will return the correct real location.\r\n\t*/\r\n\trealLocation: function (cLocation, pLocation)\r\n\t{\r\n\t\tif (!pLocation) pLocation = this.location;\r\n\t\tif (!pLocation) pLocation = ' ';\r\n\r\n\t\tvar state = 0, i = 0, j = 0, k;\r\n\t\tvar rLocation = '';\r\n\r\n\t\twhile (state != -1 && i < cLocation.length && j < pLocation.length)\r\n\t\t{\r\n\t\t\tswitch (state)\r\n\t\t\t{\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (cLocation.substr(i++, 1) == '*')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (cLocation.substr(i-1, 1) != pLocation.substr(j++, 1))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trLocation += cLocation.substr(i-1);\r\n\t\t\t\t\t\tstate = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trLocation += pLocation.substr(j-1, 1);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (cLocation.substr(i, 1) == '*')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate = 3;\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstate = 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tk = pLocation.indexOf(cLocation.substr(i, 1), j);\r\n\t\t\t\t\tif (k == -1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trLocation += pLocation.substr(j) + cLocation.substr(i);\r\n\t\t\t\t\t\tstate = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trLocation += pLocation.substr(j, k-j);\r\n\r\n\t\t\t\t\tstate = 0;\r\n\t\t\t\t\tj = k;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tk = pLocation.lastIndexOf(cLocation.substr(i, 1));\r\n\t\t\t\t\tif (k == -1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trLocation += cLocation.substr(i);\r\n\t\t\t\t\t\tstate = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trLocation += pLocation.substr(j, k-j);\r\n\r\n\t\t\t\t\tstate = 0;\r\n\t\t\t\t\tj = k;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state != -1)\r\n\t\t\trLocation += cLocation.substr(i);\r\n\r\n\t\treturn rLocation.trim();\r\n\t},\r\n\r\n\t/*\r\n\t**\tEvent handler called when the location hash changes.\r\n\t*/\r\n\tonLocationChanged: function ()\r\n\t{\r\n\t\tvar cLocation = location.hash.substr(1);\r\n\t\tvar rLocation = this.realLocation (cLocation);\r\n\r\n\t\tif (cLocation != rLocation)\r\n\t\t{\r\n\t\t\tglobalThis.location.replace('#' + rLocation);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.location = cLocation;\r\n\t\tthis.args = this.location.split ('/');\r\n\r\n\t\tif (this.ignoreHashChangeEvent > 0)\r\n\t\t{\r\n\t\t\tthis.ignoreHashChangeEvent--;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.sortedRoutes.length; i++)\r\n\t\t\tthis.routes[this.sortedRoutes[i]].dispatch (this.location);\r\n\t},\r\n\r\n\t/*\r\n\t**\tNavigates to the given hash-based URL.\r\n\t*/\r\n\tnavigate: function (location, replace=false)\r\n\t{\r\n\t\tlocation = this.realLocation(location);\r\n\r\n\t\tif (globalThis.location.hash == '#'+location)\r\n\t\t{\r\n\t\t\tthis.refresh();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (replace)\r\n\t\t\tglobalThis.location.replace('#'+location);\r\n\t\telse\r\n\t\t\tglobalThis.location.hash = location;\r\n\t}\r\n};\r\n\r\n_Router.init();\r\n\r\nexport default _Router;\r\n","/*\r\n**\triza/element\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport { Rinn, Model, Template } from 'rinn';\r\n\r\n/**\r\n * \tMap containing the original prototypes for all registered elements.\r\n */\r\nconst elementPrototypes = { };\r\n\r\n/**\r\n * \tMap containing the final classes for all registered elements.\r\n */\r\nconst elementClasses = { };\r\n\r\n/**\r\n * \tBase class for custom elements. Provides support for model-triggered events, easy definition of handlers for events originated in\r\n * \tself or child-elements, and several utility methods.\r\n */\r\n\r\nconst Element = \r\n{\r\n\t/**\r\n\t * \tInternal element ID. Added as namespace to model events. Ensures that certain model events are run locally only, not affecting other event handlers.\r\n\t */\r\n\teid: null,\r\n\r\n\t/**\r\n\t * \tIndicates if the element is a root element, that is, the target element to attach child elements having `data-ref` attribute.\r\n\t */\r\n\tisRoot: true,\r\n\r\n\t/**\r\n\t * \tRoot element to which this element is attached (when applicable).\r\n\t */\r\n\troot: null,\r\n\r\n\t/**\r\n\t * \tIndicates ready-state of the element. Possible values are: 0: \"Not ready\", 1: \"Children Initialized\", and 2: \"Parent Ready\".\r\n\t */\r\n\tisReady: 0,\r\n\treadyReenter: 0,\r\n\treadyLocked: 0,\r\n\r\n\t/**\r\n\t * \tModel type (class) for the element's model.\r\n\t */\r\n\tmodelt: Model,\r\n\r\n\t/**\r\n\t * \tData model related to the element.\r\n\t */\r\n\tmodel: null,\r\n\r\n\t/**\r\n\t * \tEvents map.\r\n\t */\r\n\tevents:\r\n\t{\r\n\t\t'click [data-action]': function(evt)\r\n\t\t{\r\n\t\t\tlet opts = evt.source.dataset.action.split(' ');\r\n\r\n\t\t\tif (opts[0] in this)\r\n\t\t\t\tthis[opts[0]] ({ ...evt.params, ...evt.source.dataset, ...opts, length: opts.length }, evt);\r\n\t\t\telse\r\n\t\t\t\tevt.continuePropagation = true;\r\n\t\t},\r\n\r\n\t\t'keyup(13) input[data-enter]': function(evt)\r\n\t\t{\r\n\t\t\tlet opts = evt.source.dataset.enter.split(' ');\r\n\r\n\t\t\tif (opts[0] in this)\r\n\t\t\t\tthis[opts[0]] ({ ...evt.params, ...evt.source.dataset, ...opts, length: opts.length }, evt);\r\n\t\t\telse\r\n\t\t\t\tevt.continuePropagation = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * \tElement constructor.\r\n\t */\r\n\t__ctor: function()\r\n\t{\r\n\t\tthis._list_watch = [];\r\n\t\tthis._list_visible = [];\r\n\t\tthis._list_property = [];\r\n\r\n\t\tif ('root' in this.dataset)\r\n\t\t{\r\n\t\t\tif (this.dataset.root == 'false')\r\n\t\t\t\tthis.isRoot = false;\r\n\t\t}\r\n\r\n\t\tthis.style.display = 'block';\r\n\r\n\t\tthis.eid = Math.random().toString().substr(2);\r\n\r\n\t\tif (this.model != null)\r\n\t\t{\r\n\t\t\tlet tmp = this.model;\r\n\t\t\tthis.model = null;\r\n\t\t\tthis.setModel (tmp, false);\r\n\t\t}\r\n\r\n\t\tObject.keys(this._super).reverse().forEach(i =>\r\n\t\t{\r\n\t\t\tif ('init' in this._super[i])\r\n\t\t\t\tthis._super[i].init();\r\n\t\t});\r\n\r\n\t\tif (Element.debug)\r\n\t\t\tconsole.log('>> ' + this.tagName + ' INIT ON ' + this.parentElement.tagName);\r\n\r\n\t\tthis.init();\r\n\r\n\t\tif (this.events)\r\n\t\t\tthis.bindEvents (this.events);\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (this.tagName.toLowerCase() !== 'r-dom-probe')\r\n\t\t\t\tthis.appendChild(document.createElement('r-dom-probe'));\r\n\t\t\telse\r\n\t\t\t\tthis.markReady();\r\n\t\t}, 0);\r\n\t},\r\n\r\n\t/**\r\n\t * \tInitializes the element. Called after construction of the instance.\r\n\t */\r\n\tinit: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t * \tExecuted when the children of the element are ready.\r\n\t */\r\n\tready: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t * \tExecuted after ready and after the root is also ready.\r\n\t */\r\n\trready: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t * \tMarks the element as ready.\r\n\t */\r\n\tmarkReady: function (list=null)\r\n\t{\r\n\t\tthis.readyLocked++;\r\n\r\n\t\tif (!this.isReady)\r\n\t\t{\r\n\t\t\tthis.isReady = 1;\r\n\r\n\t\t\t// Set model is `model` property was set in the element.\r\n\t\t\tif ('model' in this.dataset)\r\n\t\t\t{\r\n\t\t\t\tlet ref = this.getFieldByPath(this.dataset.model);\r\n\t\t\t\tif (ref) this.setModel(ref);\r\n\t\t\t}\r\n\r\n\t\t\t// Run ready methods in class hierarchy.\r\n\t\t\tObject.keys(this._super).reverse().forEach(i =>\r\n\t\t\t{\r\n\t\t\t\tif ('ready' in this._super[i])\r\n\t\t\t\t\tthis._super[i].ready();\r\n\t\t\t});\r\n\r\n\t\t\tif (Element.debug)\r\n\t\t\t\tconsole.log('>> ' + this.tagName + ' READY');\r\n\r\n\t\t\tthis.ready();\r\n\t\t\tthis.collectWatchers();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.collectWatchers();\r\n\r\n\t\tlet root = this.findCustomParent(this);\r\n\r\n\t\tif (Element.debug)\r\n\t\t\tconsole.log(this.tagName + ' ROOT IS ' + (root ? root.tagName : 'NULL'));\r\n\r\n\t\tif (root && root.isReady === 0 && this.isReady != 0)\r\n\t\t\troot.checkReady();\r\n\r\n\t\tlet rootReady = false;\r\n\r\n\t\tif (root && root.isReady === 2 && this.isReady !== 2)\r\n\t\t{\r\n\t\t\tthis.getRoot();\r\n\r\n\t\t\tif (this.root && this.dataset.ref)\r\n\t\t\t{\r\n\t\t\t\tif (Element.debug)\r\n\t\t\t\t\tconsole.log(this.tagName + ' REF AS `' + this.dataset.ref + '` ON ' + this.root.tagName);\r\n\r\n\t\t\t\tthis.root[this.dataset.ref] = this;\r\n\t\t\t\tthis.root.onRefAdded (this.dataset.ref, this);\r\n\t\t\t}\r\n\r\n\t\t\trootReady = true;\r\n\t\t}\r\n\r\n\t\tif (!root && this.isReady !== 2)\r\n\t\t{\r\n\t\t\trootReady = true;\r\n\t\t}\r\n\r\n\t\tif (rootReady)\r\n\t\t{\r\n\t\t\tthis.isReady = 2;\r\n\r\n\t\t\tif (list !== null) {\r\n\t\t\t\tfor (let elem of list)\r\n\t\t\t\t\telem.checkReady();\r\n\t\t\t}\r\n\r\n\t\t\tif (Element.debug)\r\n\t\t\t\tconsole.log('>> ' + this.tagName + ' RREADY');\r\n\r\n\t\t\tObject.keys(this._super).reverse().forEach(i =>\r\n\t\t\t{\r\n\t\t\t\tif ('rready' in this._super[i])\r\n\t\t\t\t\tthis._super[i].rready();\r\n\t\t\t});\r\n\t\t\r\n\t\t\tthis.rready();\r\n\t\t}\r\n\r\n\t\tthis.readyLocked--;\r\n\r\n\t\tif (this.readyReenter && !this.readyLocked)\r\n\t\t{\r\n\t\t\tthis.readyReenter = false;\r\n\t\t\tthis.checkReady();\r\n\t\t}\r\n\r\n\t\tif (this.tagName.toLowerCase() === 'r-dom-probe')\r\n\t\t\tthis.remove();\r\n\t},\r\n\r\n\t/**\r\n\t *\tChecks if all children are ready and fires the appropriate function (`ready` and/or `rready`).\r\n\t */\r\n\tcheckReady: function()\r\n\t{\r\n\t\tif (this.childNodes.length == 0)\r\n\t\t\treturn;\r\n\r\n\t\tif (this.readyLocked)\r\n\t\t{\r\n\t\t\tthis.readyReenter = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet isReady = true;\r\n\t\tlet list = [];\r\n\r\n\t\tlet result = document.evaluate(\".//*[contains(name(),'-')]\", this, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\tif (Element.debug)\r\n\t\t\tconsole.log('# CHECKING ' + this.tagName);\r\n\r\n\t\twhile (true)\r\n\t\t{\r\n\t\t\tlet elem = result.iterateNext();\r\n\t\t\tif (!elem) break;\r\n\r\n\t\t\tif (elem === this)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tlet root = this.findCustomParent(elem);\r\n\t\t\tif (root !== this) continue;\r\n\r\n\t\t\tif (Element.debug)\r\n\t\t\t\tconsole.log('   ' + elem.tagName + ' = ' + elem.isReady);\r\n\r\n\t\t\tif (!elem.isReady)\r\n\t\t\t\tisReady = false;\r\n\r\n\t\t\tlist.push(elem);\r\n\t\t}\r\n\r\n\t\tif (!isReady) return;\r\n\r\n\t\tthis.markReady(list);\r\n\t},\r\n\r\n\t/**\r\n\t * \tReturns the value of a field given its path. Starts from `global`, unless the first item in the path is `this`, in which case it will start from the element.\r\n\t */\r\n\tgetFieldByPath: function(path)\r\n\t{\r\n\t\tif (!path) return null;\r\n\r\n\t\tlet tmp = path.split('.');\r\n\t\tlet ref = global;\r\n\r\n\t\tif (tmp.length && tmp[0] == 'this')\r\n\t\t{\r\n\t\t\tref = this;\r\n\t\t\ttmp.shift();\r\n\t\t}\r\n\r\n\t\tif (tmp.length && tmp[0] == 'root')\r\n\t\t{\r\n\t\t\tref = this.getRoot();\r\n\t\t\ttmp.shift();\r\n\t\t}\r\n\r\n\t\twhile (ref != null && tmp.length != 0)\r\n\t\t\tref = ref[tmp.shift()];\r\n\r\n\t\treturn ref;\r\n\t},\r\n\r\n\t/**\r\n\t * \tReturns the root of the element (that is, the `root` property). If not set it will attempt to find the root first.\r\n\t */\r\n\tgetRoot: function()\r\n\t{\r\n\t\treturn this.root ? this.root : (this.root = this.findRoot());\r\n\t},\r\n\r\n\t/**\r\n\t * \tSets the model of the element and executes the `modelChanged` event handler (unless `update` is set to false).\r\n\t */\r\n\tsetModel: function (model, update=true)\r\n\t{\r\n\t\tif (!model) return this;\r\n\r\n\t\tmodel = Rinn.ensureTypeOf(this.modelt, model);\r\n\r\n\t\tif (this.model !== model)\r\n\t\t{\r\n\t\t\tif (this.model != null)\r\n\t\t\t{\r\n\t\t\t\tthis.model.removeEventListener (this.eid+':modelChanged', this.onModelPreChanged, this);\r\n\t\t\t\tthis.model.removeEventListener (this.eid+':propertyChanging', this.onModelPropertyChanging, this);\r\n\t\t\t\tthis.model.removeEventListener (this.eid+':propertyChanged', this.onModelPropertyPreChanged, this);\r\n\t\t\t\tthis.model.removeEventListener (this.eid+':propertyRemoved', this.onModelPropertyRemoved, this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.model = model;\r\n\r\n\t\t\tthis.model.addEventListener (this.eid+':modelChanged', this.onModelPreChanged, this);\r\n\t\t\tthis.model.addEventListener (this.eid+':propertyChanging', this.onModelPropertyChanging, this);\r\n\t\t\tthis.model.addEventListener (this.eid+':propertyChanged', this.onModelPropertyPreChanged, this);\r\n\t\t\tthis.model.addEventListener (this.eid+':propertyRemoved', this.onModelPropertyRemoved, this);\r\n\t\t}\r\n\r\n\t\tif (update !== false)\r\n\t\t\tthis.model.setNamespace(this.eid).update(true).setNamespace(null);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * \tReturns the model of the element. Added for symmetry only, exactly the same as accesing public property `model` of this class.\r\n\t */\r\n\tgetModel: function ()\r\n\t{\r\n\t\treturn this.model;\r\n\t},\r\n\r\n\t/**\r\n\t * \tAdds one or more CSS classes (separated by space) to the element.\r\n\t */\r\n\taddClass: function (classString)\r\n\t{\r\n\t\tif (!classString) return this;\r\n\r\n\t\tclassString.split(' ').forEach(i =>\r\n\t\t{\r\n\t\t\ti = i.trim();\r\n\t\t\tif (!i) return;\r\n\r\n\t\t\tif (i[0] == '-' || i[0] == '+')\r\n\t\t\t\tthis.classList[i[0] == '-' ? 'remove' : 'add'](i.substr(1));\r\n\t\t\telse\r\n\t\t\t\tthis.classList.add(i);\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * \tRemoves one or more CSS classes (separated by space) from the element.\r\n\t */\r\n\tremoveClass: function (classString)\r\n\t{\r\n\t\tif (!classString) return this;\r\n\r\n\t\tclassString.split(' ').forEach(i =>\r\n\t\t{\r\n\t\t\ti = i.trim();\r\n\t\t\tif (!i) return;\r\n\r\n\t\t\tif (i[0] == '-' || i[0] == '+')\r\n\t\t\t\tthis.classList[i[0] == '-' ? 'remove' : 'add'](i.substr(1));\r\n\t\t\telse\r\n\t\t\t\tthis.classList.remove(i);\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * \tSets one or more style properties to the element (separated by semi-colon).\r\n\t */\r\n\tsetStyle: function (styleString)\r\n\t{\r\n\t\tif (!styleString) return this;\r\n\r\n\t\tstyleString.split(';').forEach(i => {\r\n\t\t\tlet j = (i = i.trim()).indexOf(':');\r\n\t\t\tif (j == -1) return;\r\n\r\n\t\t\tlet name = i.substr(0, j).trim();\r\n\t\t\tfor (let k = name.indexOf('-'); k != -1; k = name.indexOf('-')) {\r\n\t\t\t\tname = name.substr(0, k) + name.substr(k+1, 1).toUpperCase() + name.substr(k+2);\r\n\t\t\t}\r\n\r\n\t\t\tthis.style[name] = i.substr(j+1).trim();\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * \tReturns the width of the specified element (or of itself it none provided), uses `getBoundingClientRect`.\r\n\t */\r\n\tgetWidth: function (elem=null)\r\n\t{\r\n\t\treturn (elem || this).getBoundingClientRect().width;\r\n\t},\r\n\r\n\t/**\r\n\t * \tReturns the height of the specified element (or of itself it none provided), uses `getBoundingClientRect`.\r\n\t */\r\n\tgetHeight: function (elem=null)\r\n\t{\r\n\t\treturn (elem || this).getBoundingClientRect().height;\r\n\t},\r\n\r\n\t/**\r\n\t**\tBinds all events in the specified map to the element, the events map can have one of the following forms:\r\n\t**\r\n\t**\t\t\"click .button\": \"doSomething\",\t\t(Delegated Event)\r\n\t**\t\t\"click .button\": function() { },\t(Delegated Event)\r\n\t**\t\t\"myevt &this\": \"...\",\t\t\t\t(Self Event)\r\n\t**\t\t\"myevt\": \"...\",\t\t\t\t\t\t(Element Event)\r\n\t**\t\t\"myevt @objName\": \"...\",\t\t\t(EventDispatcher Event)\r\n\t**\t\t\"#propname\": \"...\",\t\t\t\t\t(Property Changed Event)\r\n\t**\t\t\"keyup(10) .input\": \"...\"\t\t\t(Delegated Event with Parameters)\r\n\t**\r\n\t**\t>> Element bindEvents (object events);\r\n\t*/\r\n\tbindEvents: function (events)\r\n\t{\r\n\t\tfor (var evtstr in events)\r\n\t\t{\r\n\t\t\tlet hdl = events[evtstr];\r\n\r\n\t\t\tif (Rinn.typeOf(hdl) == 'string')\r\n\t\t\t\thdl = this[hdl];\r\n\r\n\t\t\thdl = hdl.bind(this);\r\n\r\n\t\t\tvar i = evtstr.indexOf(' ');\r\n\r\n\t\t\tvar name = i == -1 ? evtstr : evtstr.substr(0, i);\r\n\t\t\tvar selector = i == -1 ? '' : evtstr.substr(i + 1);\r\n\r\n\t\t\tlet args = null;\r\n\r\n\t\t\tvar j = name.indexOf('(');\r\n\t\t\tif (j != -1)\r\n\t\t\t{\r\n\t\t\t\targs = name.substr(j+1, name.length-j-2).split(',');\r\n\t\t\t\tname = name.substr(0, j);\r\n\t\t\t}\r\n\r\n\t\t\tif (selector[0] == '@')\r\n\t\t\t{\r\n\t\t\t\tif (selector != '@this')\r\n\t\t\t\t{\r\n\t\t\t\t\tthis[selector.substr(1)].addEventListener(name, hdl);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tselector = this;\r\n\t\t\t}\r\n\t\t\telse if (selector[0] == '&')\r\n\t\t\t{\r\n\t\t\t\tif (selector != '&this')\r\n\t\t\t\t\tselector = \"[data-ref='\"+selector.substr(1)+\"']\";\r\n\t\t\t\telse\r\n\t\t\t\t\tselector = this;\r\n\t\t\t}\r\n\r\n\t\t\tif (name.substr(0, 1) == '#')\r\n\t\t\t{\r\n\t\t\t\tthis.listen('propertyChanged.'+name.substr(1), this, hdl);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (args != null)\r\n\t\t\t{\r\n\t\t\t\tswitch (name)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'keyup': case 'keydown':\r\n\t\t\t\t\t\tthis.listen (name, selector, function (evt)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (Rinn.indexOf(args, evt.keyCode.toString()) != -1)\r\n\t\t\t\t\t\t\t\treturn hdl (evt, args);\r\n\r\n\t\t\t\t\t\t\tevt.continuePropagation = true;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.listen (name, selector, hdl);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes the underlying event handler given an event and a selector. Called internally by listen().\r\n\t**\r\n\t**\t>> void _eventHandler (event evt, string selector, function handler);\r\n\t*/\r\n\t_eventHandler: function (evt, selector, handler)\r\n\t{\r\n\t\tif (evt.continuePropagation === false)\r\n\t\t\treturn;\r\n\r\n\t\tevt.continuePropagation = true;\r\n\t\tevt.source = evt.target;\r\n\r\n\t\tif (selector && selector instanceof HTMLElement)\r\n\t\t{\r\n\t\t\tif (evt.source === selector)\r\n\t\t\t{\r\n\t\t\t\tevt.continuePropagation = false;\r\n\r\n\t\t\t\tif (handler.call (this, evt, evt.detail) === true)\r\n\t\t\t\t\tevt.continuePropagation = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (selector && selector != '*')\r\n\t\t{\r\n\t\t\tlet elems = this.querySelectorAll(selector);\r\n\r\n\t\t\twhile (evt.source !== this)\r\n\t\t\t{\r\n\t\t\t\tlet i = Rinn.indexOf (elems, evt.source, true);\r\n\t\t\t\tif (i !== -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tevt.continuePropagation = false;\r\n\r\n\t\t\t\t\tif (handler.call (this, evt, evt.detail) === true)\r\n\t\t\t\t\t\tevt.continuePropagation = true;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tevt.source = evt.source.parentElement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tevt.continuePropagation = false;\r\n\r\n\t\t\tif (handler.call (this, evt, evt.detail) === true)\r\n\t\t\t\tevt.continuePropagation = true;\r\n\t\t}\r\n\r\n\t\tif (evt.continuePropagation === false)\r\n\t\t{\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t**\tListens for an event on elements matching the specified selector, returns an object with a single method `remove` used\r\n\t**\tto remove the listener when it is no longer needed.\r\n\t**\r\n\t**\t>> object listen (string eventName, string selector, function handler);\r\n\t**\t>> object listen (string eventName, function handler);\r\n\t*/\r\n\tlisten: function (eventName, selector, handler)\r\n\t{\r\n\t\tlet eventCatcher = false;\r\n\t\tlet eventImmediate = false;\r\n\r\n\t\tif (Rinn.typeOf(selector) == 'function')\r\n\t\t{\r\n\t\t\thandler = selector;\r\n\t\t\tselector = null;\r\n\t\t}\r\n\r\n\t\tif (eventName[eventName.length-1] == '!')\r\n\t\t{\r\n\t\t\teventName = eventName.substr(0, eventName.length-1);\r\n\t\t\teventCatcher = true;\r\n\t\t}\r\n\r\n\t\tif (eventName[0] == '!')\r\n\t\t{\r\n\t\t\teventName = eventName.substr(1);\r\n\t\t\teventImmediate = true;\r\n\t\t}\r\n\r\n\t\tlet callback0 = null;\r\n\t\tlet callback1 = null;\r\n\t\tlet self = this;\r\n\r\n\t\tthis.addEventListener (eventName, callback0 = (evt) =>\r\n\t\t{\r\n\t\t\tif (evt.continuePropagation === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (!evt.firstCapture)\r\n\t\t\t{\r\n\t\t\t\tevt.firstCapture = this;\r\n\t\t\t\tevt.firstCaptureCount = 0;\r\n\t\t\t\tevt.queue = [];\r\n\t\t\t}\r\n\r\n\t\t\tif (evt.firstCapture === this)\r\n\t\t\t\tevt.firstCaptureCount++;\r\n\r\n\t\t\tif (eventCatcher == true)\r\n\t\t\t\tevt.queue.push([this, selector, handler]);\r\n\r\n\t\t\tif (eventImmediate == true)\r\n\t\t\t\tthis._eventHandler(evt, selector, handler);\r\n\t\t},\r\n\t\ttrue);\r\n\r\n\t\tthis.addEventListener (eventName, callback1 = (evt) =>\r\n\t\t{\r\n\t\t\tif (evt.continuePropagation === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (eventCatcher != true && eventImmediate != true)\r\n\t\t\t\tthis._eventHandler(evt, selector, handler);\r\n\r\n\t\t\tif (evt.firstCapture === this && evt.continuePropagation !== false)\r\n\t\t\t{\r\n\t\t\t\tif (--evt.firstCaptureCount == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\twhile (evt.queue.length)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet q = evt.queue.pop();\r\n\t\t\t\t\t\tq[0]._eventHandler(evt, q[1], q[2]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tevt.continuePropagation = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfalse);\r\n\r\n\t\treturn {\r\n\t\t\tremoved: false,\r\n\t\t\tremove: function() {\r\n\t\t\t\tif (this.removed) return;\r\n\t\t\t\tthis.removed = true;\r\n\t\t\t\tself.removeEventListener(eventName, callback0, true);\r\n\t\t\t\tself.removeEventListener(eventName, callback1, false);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t**\tCreates an event object for later dispatch.\r\n\t*/\r\n\tcreateEventObject: function(eventName, args, bubbles)\r\n\t{\r\n\t\tlet evt;\r\n\r\n\t\tif (eventName == 'click')\r\n\t\t\tevt = new MouseEvent(eventName, { bubbles: bubbles, detail: args });\r\n\t\telse\r\n\t\t\tevt = new CustomEvent (eventName, { bubbles: bubbles, detail: args });\r\n\r\n\t\treturn evt;\r\n\t},\r\n\r\n\t/**\r\n\t**\tDispatches a new event with the specified name and the given arguments.\r\n\t*/\r\n\tdispatch: function (eventName, args=null, bubbles=true)\r\n\t{\r\n\t\tthis.dispatchEvent (this.createEventObject(eventName, args, bubbles));\r\n\t},\r\n\r\n\t/**\r\n\t**\tDispatches a new event on the specified element with the given name and arguments (uses `CustomEvent`).\r\n\t*/\r\n\tdispatchOn: function (elem, eventName, args=null, bubbles=true)\r\n\t{\r\n\t\telem.dispatchEvent (this.createEventObject(eventName, args, bubbles));\r\n\t},\r\n\r\n\t/**\r\n\t**\tSets the innerHTML property of the element and runs some post set-content tasks.\r\n\t**\r\n\t**\t>> void setInnerHTML (value);\r\n\t*/\r\n\tsetInnerHTML: function (value)\r\n\t{\r\n\t\tthis.readyLocked++;\r\n\t\tthis.innerHTML = value;\r\n\t\tthis.readyLocked--;\r\n\t},\r\n\r\n\t/**\r\n\t**\tCollects all watchers (data-watch, data-visible, data-property), that depend on the model, should be invoked when the structure\r\n\t**\tof the element changed (added/removed children). This is automatically called when the setInnerHTML method is called.\r\n\t**\r\n\t**\tNote that for 3rd party libs that add children to this element (which could probably have a watcher) will possibly result in\r\n\t**\tduplication of the added elements when compiling the innerHTML template. To prevent this add the 'pseudo' CSS class to any\r\n\t**\telement that should not be added to the HTML template.\r\n\t**\r\n\t**\t>> void collectWatchers ();\r\n\t*/\r\n\tcollectWatchers: function ()\r\n\t{\r\n\t\tlet self = this;\r\n\t\tlet modified = false;\r\n\t\tlet list;\r\n\r\n\t\tif (!this.isRoot) return;\r\n\r\n\t\tlet _list_watch_length = this._list_watch.length;\r\n\t\tlet _list_visible_length = this._list_visible.length;\r\n\t\tlet _list_property_length = this._list_property.length;\r\n\r\n\t\t/* *** */\r\n\t\tlist = this.querySelectorAll('[data-watch]');\r\n\t\tfor (let i = 0; i < list.length; i++)\r\n\t\t{\r\n\t\t\tfor (let j of list[i].querySelectorAll('.pseudo'))\r\n\t\t\t\tj.remove();\r\n\r\n\t\t\tlist[i]._template = Template.compile(list[i].innerHTML);\r\n\t\t\tlist[i]._watch = new RegExp('^(' + list[i].dataset.watch + ')$');\r\n\t\t\tlist[i].innerHTML = '';\r\n\r\n\t\t\tlist[i].removeAttribute('data-watch');\r\n\t\t\tthis._list_watch.push(list[i]);\r\n\t\t}\r\n\r\n\t\tif ('selfWatch' in this.dataset)\r\n\t\t{\r\n\t\t\tfor (let j of this.querySelectorAll('.pseudo'))\r\n\t\t\t\tj.remove();\r\n\r\n\t\t\tthis._template = Template.compile(this.innerHTML);\r\n\t\t\tthis._watch = new RegExp('^(' + this.dataset.selfWatch + ')$');\r\n\t\t\tthis.innerHTML = '';\r\n\r\n\t\t\tthis.removeAttribute('data-self-watch');\r\n\t\t\tthis._list_watch.push(this);\r\n\t\t}\r\n\r\n\t\t/* *** */\r\n\t\tlist = this.querySelectorAll('[data-visible]');\r\n\t\tfor (let i = 0; i < list.length; i++)\r\n\t\t{\r\n\t\t\tlist[i]._visible = Template.compile(list[i].dataset.visible);\r\n\r\n\t\t\tlist[i].removeAttribute('data-visible');\r\n\t\t\tthis._list_visible.push(list[i]);\r\n\t\t}\r\n\r\n\t\tif ('selfVisible' in this.dataset)\r\n\t\t{\r\n\t\t\tthis._visible = Template.compile(this.dataset.selfVisible);\r\n\r\n\t\t\tthis.removeAttribute('data-self-visible');\r\n\t\t\tthis._list_visible.push(this);\r\n\t\t}\r\n\r\n\t\t/* *** */\r\n\t\tlist = this.querySelectorAll('[data-property]');\r\n\t\tfor (let i = 0; i < list.length; i++)\r\n\t\t{\r\n\t\t\tlist[i].onchange = list[i].onblur = function()\r\n\t\t\t{\r\n\t\t\t\tswitch (this.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\tif (this.checked) self.getModel().set(this.name, this.value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.checked ? '1' : '0');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'field':\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.getValue());\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (list[i].tagName == 'SELECT')\r\n\t\t\t{\r\n\t\t\t\tlist[i].onmouseup = function()\r\n\t\t\t\t{\r\n\t\t\t\t\tself.getModel().set(this.name, this.value);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tlist[i].name = list[i].dataset.property;\r\n\r\n\t\t\tlist[i].removeAttribute('data-property');\r\n\t\t\tthis._list_property.push(list[i]);\r\n\t\t}\r\n\r\n\t\tif ('selfProperty' in this.dataset)\r\n\t\t{\r\n\t\t\tthis.onchange = this.onblur = function()\r\n\t\t\t{\r\n\t\t\t\tswitch (this.type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\tif (this.checked) self.getModel().set(this.name, this.value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.checked ? '1' : '0');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'field':\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.getValue());\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tself.getModel().set(this.name, this.value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (this.tagName == 'SELECT')\r\n\t\t\t{\r\n\t\t\t\tthis.onmouseup = function()\r\n\t\t\t\t{\r\n\t\t\t\t\tself.getModel().set(this.name, this.value);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tthis.name = this.dataset.selfProperty;\r\n\r\n\t\t\tthis.removeAttribute('data-self-property');\r\n\t\t\tthis._list_property.push(this);\r\n\t\t}\r\n\r\n\t\t/* *** */\r\n\t\tthis._list_watch = this._list_watch.filter(i => i.parentElement != null);\r\n\t\tif (_list_watch_length != this._list_watch.length) modified = true;\r\n\r\n\t\tthis._list_visible = this._list_visible.filter(i => i.parentElement != null);\r\n\t\tif (_list_visible_length != this._list_visible.length) modified = true;\r\n\r\n\t\tthis._list_property = this._list_property.filter(i => i.parentElement != null);\r\n\t\tif (_list_property_length != this._list_property.length) modified = true;\r\n\r\n\t\tif (this.model != null && modified)\r\n\t\t\tthis.model.setNamespace(this.eid).update(true).setNamespace(null);\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecuted when the element is created and yet not attached to the DOM tree.\r\n\t*/\r\n\tonCreated: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecuted when the element is attached to the DOM tree.\r\n\t*/\r\n\tonConnected: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecuted when the element is no longer a part of the DOM tree.\r\n\t*/\r\n\tonDisconnected: function()\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecuted on the root element when a child element has `data-ref` attribute and it was added to it.\r\n\t*/\r\n\tonRefAdded: function (name, element)\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecuted on the root element when a child element has `data-ref` attribute and it was removed from it.\r\n\t*/\r\n\tonRefRemoved: function (name, element)\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when the model has changed, executed before onModelChanged() to update internal dependencies,\r\n\t**\tshould not be overriden or elements watching the model will not be updated.\r\n\t**\r\n\t**\t>> void onModelPreChanged (evt, args);\r\n\t*/\r\n\tonModelPreChanged: function (evt, args)\r\n\t{\r\n\t\tlet data = this.getModel().get();\r\n\r\n\t\tfor (let i = 0; i < this._list_watch.length; i++)\r\n\t\t{\r\n\t\t\tfor (let j of args.fields)\r\n\t\t\t{\r\n\t\t\t\tif (!this._list_watch[i]._watch.test(j))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tthis._list_watch[i].innerHTML = this._list_watch[i]._template(data);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this._list_visible.length; i++)\r\n\t\t{\r\n\t\t\tif (!!this._list_visible[i]._visible(data, 'arg'))\r\n\t\t\t\tthis._list_visible[i].style.removeProperty('display');\r\n\t\t\telse\r\n\t\t\t\tthis._list_visible[i].style.setProperty('display', 'none', 'important');\r\n\t\t}\r\n\r\n\t\tthis.onModelChanged(evt, args);\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when the model has changed.\r\n\t*/\r\n\tonModelChanged: function (evt, args) // @override\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when a property of the model is changing. Fields `name` and `value` can be found in the `args` object.\r\n\t*/\r\n\tonModelPropertyChanging: function (evt, args) // @override\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when a property of the model has changed, executed before onModelPropertyChanged() to update internal\r\n\t**\tdependencies. Automatically triggers internal events named `propertyChanged.<propertyName>` and `propertyChanged`.\r\n\t**\tShould not be overriden or elements depending on the property will not be updated.\r\n\t*/\r\n\tonModelPropertyPreChanged: function (evt, args)\r\n\t{\r\n\t\tfor (let i = 0; i < this._list_property.length; i++)\r\n\t\t{\r\n\t\t\tif (this._list_property[i].name == args.name)\r\n\t\t\t{\r\n\t\t\t\tlet trigger = true;\r\n\r\n\t\t\t\tswitch (this._list_property[i].type)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\tif (this._list_property[i].value != args.value)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._list_property[i].parentElement.classList.remove('active');\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._list_property[i].checked = true;\r\n\t\t\t\t\t\tthis._list_property[i].parentElement.classList.add('active');\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'checkbox':\r\n\t\t\t\t\t\tif (~~args.value)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._list_property[i].checked = true;\r\n\t\t\t\t\t\t\tthis._list_property[i].parentElement.classList.add('active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis._list_property[i].checked = false;\r\n\t\t\t\t\t\t\tthis._list_property[i].parentElement.classList.remove('active');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'field':\r\n\t\t\t\t\t\tthis._list_property[i].val = this._list_property[i].dataset.value = args.value;\t\r\n\t\t\t\t\t\tthis._list_property[i].setValue (args.value);\r\n\t\t\t\t\t\ttrigger = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._list_property[i].value = args.value;\r\n\t\t\t\t\t\tthis._list_property[i].val = this._list_property[i].dataset.value = args.value;\t\r\n\r\n\t\t\t\t\t\tif (this._list_property[i].value != args.value)\r\n\t\t\t\t\t\t\ttrigger = false;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (trigger && this._list_property[i].onchange)\r\n\t\t\t\t\tthis._list_property[i].onchange();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.dispatch ('propertyChanged.' + args.name, args, false);\r\n\t\tthis.dispatch ('propertyChanged', args, false);\r\n\r\n\t\tthis.onModelPropertyChanged(evt, args);\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when a property of the model has changed.\r\n\t*/\r\n\tonModelPropertyChanged: function (evt, args) // @override\r\n\t{\r\n\t},\r\n\r\n\t/**\r\n\t**\tEvent handler invoked when a property of the model is removed. Field `name` can be found in the `args` object.\r\n\t*/\r\n\tonModelPropertyRemoved: function (evt, args) // @override\r\n\t{\r\n\t},\r\n\r\n\t/*\r\n\t**\tRuns the following preparation procedures on the specified prototype:\r\n\t**\t\t- All functions named 'event <event-name> [event-selector]' will be moved to the 'events' map.\r\n\t**\r\n\t**\t>> void preparePrototype (object proto);\r\n\t*/\r\n\tpreparePrototype: function (proto)\r\n\t{\r\n\t\tif (proto.__prototypePrepared === true)\r\n\t\t\treturn;\r\n\r\n\t\tproto.__prototypePrepared = true;\r\n\r\n\t\tif (!('events' in proto))\r\n\t\t\tproto.events = { };\r\n\r\n\t\tfor (let i in proto)\r\n\t\t{\r\n\t\t\tif (i.startsWith('event '))\r\n\t\t\t{\r\n\t\t\t\tproto.events[i.substr(6)] = proto[i];\r\n\t\t\t\tdelete proto[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/*\r\n\t**\tRegisters a new custom element with the specified name. Extra functionality can be added with one or more prototypes, by default\r\n\t**\tall elements also get the `Element` prototype. Note that the final prototypes of all registered elements are stored, and if you want\r\n\t**\tto inherit another element's prototype just provide its name (string) in the protos argument list.\r\n\t**\r\n\t**\t>> class register (string name, ...(object|string) protos);\r\n\t*/\r\n\tregister: function (name, ...protos)\r\n\t{\r\n\t\tconst newElement = class extends HTMLElement\r\n\t\t{\r\n\t\t\tconstructor()\r\n\t\t\t{\r\n\t\t\t\tsuper();\r\n\t\t\t\tthis.invokeConstructor = true;\r\n\r\n\t\t\t\tif (Element.debug)\r\n\t\t\t\t\tconsole.log('CREATED ' + this.tagName);\r\n\r\n\t\t\t\tthis._super = { };\r\n\r\n\t\t\t\tfor (let i of Object.entries(this.constructor.prototype._super))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis._super[i[0]] = { };\r\n\r\n\t\t\t\t\tfor (let j of Object.entries(i[1])) {\r\n\t\t\t\t\t\tthis._super[i[0]][j[0]] = j[1].bind(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.onCreated();\r\n\t\t\t}\r\n\r\n\t\t\tfindRoot (srcElement)\r\n\t\t\t{\r\n\t\t\t\tlet elem = srcElement ? srcElement : this.parentElement;\r\n\r\n\t\t\t\twhile (elem != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ('isRoot' in elem && elem.isRoot === true)\r\n\t\t\t\t\t\treturn elem;\r\n\r\n\t\t\t\t\telem = elem.parentElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tfindCustomParent (srcElement)\r\n\t\t\t{\r\n\t\t\t\tlet elem = srcElement ? srcElement.parentElement : this.parentElement;\r\n\r\n\t\t\t\twhile (elem != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (elem.tagName.indexOf('-') !== -1)\r\n\t\t\t\t\t\treturn elem;\r\n\r\n\t\t\t\t\telem = elem.parentElement;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconnectReference (root=null, flags=255)\r\n\t\t\t{\r\n\t\t\t\tif (!this.root && (flags & 1) == 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (root == null) root = this.findRoot();\r\n\t\t\t\t\tif (root != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (this.dataset.ref)\r\n\t\t\t\t\t\t\troot[this.dataset.ref] = this;\r\n\r\n\t\t\t\t\t\tthis.root = root;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconnectedCallback ()\r\n\t\t\t{\r\n\t\t\t\tthis.connectReference(null, 1);\r\n\r\n\t\t\t\tif (this.invokeConstructor)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.invokeConstructor = false;\r\n\t\t\t\t\tthis.__ctor();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.connectReference(null, 2);\r\n\t\t\t\tthis.onConnected();\r\n\r\n\t\t\t\tif (this.dataset.xref)\r\n\t\t\t\t\tglobalThis[this.dataset.xref] = this;\r\n\t\t\t}\r\n\r\n\t\t\tdisconnectedCallback()\r\n\t\t\t{\r\n\t\t\t\tif (this.root)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.dataset.ref)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.root.onRefRemoved (this.dataset.ref, this);\r\n\r\n\t\t\t\t\t\tdelete this.root[this.dataset.ref];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.root = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.onDisconnected();\r\n\r\n\t\t\t\tif (this.dataset.xref)\r\n\t\t\t\t\tdelete globalThis[this.dataset.xref];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tRinn.override (newElement.prototype, Element);\r\n\r\n\t\tconst proto = { };\r\n\t\tconst _super = { };\r\n\t\tconst events = Rinn.clone(Element.events);\r\n\r\n\t\tlet __init = true;\r\n\t\tlet __ready = true;\r\n\t\tlet __rready = true;\r\n\t\tlet __check;\r\n\r\n\t\tfor (let i = 0; i < protos.length; i++)\r\n\t\t{\r\n\t\t\tif (!protos[i]) continue;\r\n\r\n\t\t\tif (Rinn.typeOf(protos[i]) == 'string')\r\n\t\t\t{\r\n\t\t\t\tconst name = protos[i];\r\n\r\n\t\t\t\tprotos[i] = elementPrototypes[name];\r\n\t\t\t\tif (!protos[i]) continue;\r\n\r\n\t\t\t\t_super[name] = { };\r\n\r\n\t\t\t\tfor (let f in protos[i])\r\n\t\t\t\t{\r\n\t\t\t\t\tif (Rinn.typeOf(protos[i][f]) != 'function')\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t_super[name][f] = protos[i][f];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t__init = false;\r\n\t\t\t\t__ready = false;\r\n\t\t\t\t__rready = false;\r\n\t\t\t\t__check = false;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tElement.preparePrototype(protos[i]);\r\n\t\t\t\t__check = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ('_super' in protos[i])\r\n\t\t\t\tRinn.override (_super, protos[i]._super);\r\n\r\n\t\t\tif ('events' in protos[i])\r\n\t\t\t\tRinn.override (events, protos[i].events);\r\n\r\n\t\t\tRinn.override (newElement.prototype, protos[i]);\r\n\t\t\tRinn.override (proto, protos[i]);\r\n\r\n\t\t\tif (__check)\r\n\t\t\t{\r\n\t\t\t\tif (!__init && 'init' in protos[i]) __init = true;\r\n\t\t\t\tif (!__ready && 'ready' in protos[i]) __ready = true;\r\n\t\t\t\tif (!__rready && 'rready' in protos[i]) __rready = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet dummy = function(){};\r\n\r\n\t\tif (!__init)\r\n\t\t{\r\n\t\t\tnewElement.prototype.init = dummy;\r\n\t\t\tproto.init = dummy;\r\n\t\t}\r\n\r\n\t\tif (!__ready)\r\n\t\t{\r\n\t\t\tnewElement.prototype.ready = dummy;\r\n\t\t\tproto.ready = dummy;\r\n\t\t}\r\n\r\n\t\tif (!__rready)\r\n\t\t{\r\n\t\t\tnewElement.prototype.rready = dummy;\r\n\t\t\tproto.rready = dummy;\r\n\t\t}\r\n\r\n\t\tnewElement.prototype._super = _super;\r\n\t\tnewElement.prototype.events = events;\r\n\r\n\t\tproto._super = _super;\r\n\t\tproto.events = events;\r\n\r\n\t\tcustomElements.define (name, newElement);\r\n\r\n\t\telementPrototypes[name] = proto;\r\n\t\telementClasses[name] = newElement;\r\n\r\n\t\treturn newElement;\r\n\t},\r\n\r\n\t/*\r\n\t**\tExpands an already created custom element with the specified prototype(s).\r\n\t**\r\n\t**\t>> void expand (string elementName, ...object protos);\r\n\t*/\r\n\texpand: function (name, ...protos)\r\n\t{\r\n\t\tif (!(name in elementPrototypes))\r\n\t\t\treturn;\r\n\r\n\t\tconst self = elementPrototypes[name];\r\n\t\tconst elem = elementClasses[name];\r\n\r\n\t\tconst _super = self._super;\r\n\t\tconst events = self.events;\r\n\r\n\t\tfor (let proto of protos)\r\n\t\t{\r\n\t\t\tElement.preparePrototype(proto);\r\n\r\n\t\t\tif ('_super' in proto)\r\n\t\t\t\tRinn.override (_super, proto._super);\r\n\r\n\t\t\tif ('events' in proto)\r\n\t\t\t\tRinn.override (events, proto.events);\r\n\r\n\t\t\tRinn.override (elem.prototype, proto);\r\n\t\t\tRinn.override (self, proto);\r\n\t\t}\r\n\r\n\t\telem.prototype._super = _super;\r\n\t\telem.prototype.events = events;\r\n\r\n\t\tself._super = _super;\r\n\t\tself.events = events;\r\n\t},\r\n\r\n\t/*\r\n\t**\tAppends a hook to a function of a custom element.\r\n\t*/\r\n\thookAppend: function (name, functionName, newFunction)\r\n\t{\r\n\t\tif (!(name in elementPrototypes))\r\n\t\t\treturn;\r\n\r\n\t\tlet hook1 = Rinn.hookAppend(elementPrototypes[name], functionName, newFunction);\r\n\t\tlet hook2 = Rinn.hookAppend(elementClasses[name].prototype, functionName, newFunction);\r\n\r\n\t\treturn { \r\n\t\t\tunhook: function() {\r\n\t\t\t\thook1.unhook();\r\n\t\t\t\thook2.unhook();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t/*\r\n\t**\tPrepends a hook to a function of a custom element.\r\n\t*/\r\n\thookPrepend: function (name, functionName, newFunction)\r\n\t{\r\n\t\tif (!(name in elementPrototypes))\r\n\t\t\treturn;\r\n\r\n\t\tlet hook1 = Rinn.hookPrepend(elementPrototypes[name], functionName, newFunction);\r\n\t\tlet hook2 = Rinn.hookPrepend(elementClasses[name].prototype, functionName, newFunction);\r\n\r\n\t\treturn { \r\n\t\t\tunhook: function() {\r\n\t\t\t\thook1.unhook();\r\n\t\t\t\thook2.unhook();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t**\tBuilt-in action handlers.\r\n\t*/\r\n\r\n\t/**\r\n\t**\t:toggleClass <className> [<selector>]\r\n\t**\r\n\t**\tToggles a CSS class on the element.\r\n\t*/\r\n\t':toggleClass': function (args, evt)\r\n\t{\r\n\t\tlet elem = evt.source;\r\n\r\n\t\tif ('2' in args)\r\n\t\t\telem = document.querySelector(args[2]);\r\n\r\n\t\tif (!elem) return;\r\n\r\n\t\tif (elem.classList.contains(args[1]))\r\n\t\t\telem.classList.remove(args[1]);\r\n\t\telse\r\n\t\t\telem.classList.add(args[1]);\r\n\t},\r\n\r\n\t/**\r\n\t**\t:setClass <className> [<selector>]\r\n\t**\r\n\t**\tSets a CSS class on the element.\r\n\t*/\r\n\t':setClass': function (args, evt)\r\n\t{\r\n\t\tlet elem = evt.source;\r\n\r\n\t\tif ('2' in args)\r\n\t\t\telem = document.querySelector(args[2]);\r\n\r\n\t\tif (!elem) return;\r\n\r\n\t\telem.classList.add(args[1]);\r\n\t},\r\n\r\n\t/**\r\n\t**\t:volatileClass <className> [<selector>]\r\n\t**\r\n\t**\tAdds the CSS class to the element and any click outside will cause it to be removed.\r\n\t*/\r\n\t':volatileClass': function (args, evt)\r\n\t{\r\n\t\tlet elem = evt.source;\r\n\r\n\t\tif ('2' in args)\r\n\t\t\telem = document.querySelector(args[2]);\r\n\r\n\t\tif (!elem) return;\r\n\r\n\t\telem.classList.add(args[1]);\r\n\r\n\t\tlet fn = () => {\r\n\t\t\twindow.removeEventListener('click', fn, true);\r\n\t\t\telem.classList.remove(args[1]);\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('click', fn, true);\r\n\t},\r\n\r\n\t/**\r\n\t**\t:toggleClassUnique <className> <parentSelector> <childSelector>\r\n\t**\r\n\t**\tToggles a CSS class on the element and only one element in the selected parent can have the class.\r\n\t*/\r\n\t':toggleClassUnique': function (args, evt)\r\n\t{\r\n\t\tlet elem = evt.source;\r\n\t\tif (!elem) return;\r\n\r\n\t\tif (elem.classList.contains(args[1]))\r\n\t\t{\r\n\t\t\telem.classList.remove(args[1]);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\telem.querySelectorParent(args[2]).querySelectorAll(args[3]).forEach(elem => elem.classList.remove(args[1]));\r\n\t\t\telem.classList.add(args[1]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t**\t:setClassUnique <className> <parentSelector> <childSelector>\r\n\t**\r\n\t**\tSets a CSS class on the element and only that element in the selected parent can have the class.\r\n\t*/\r\n\t':setClassUnique': function (args, evt)\r\n\t{\r\n\t\tlet elem = evt.source;\r\n\t\tif (!elem) return;\r\n\r\n\t\telem.querySelectorParent(args[2]).querySelectorAll(args[3]).forEach(elem => elem.classList.remove(args[1]));\r\n\t\telem.classList.add(args[1]);\r\n\t}\r\n};\r\n\r\nElement.debug = false;\r\n\r\nElement.register('r-elem', {\r\n});\r\n\r\nElement.register ('r-dom-probe', {\r\n});\r\n\r\n/* ****************************************** */\r\n\r\n/**\r\n**\tFinds the parent element given a selector.\r\n*/\r\nHTMLElement.prototype.querySelectorParent = function (selector)\r\n{\r\n\tlet elem = this;\r\n\r\n\twhile (elem != null)\r\n\t{\r\n\t\tif (elem.matches(selector))\r\n\t\t\tbreak;\r\n\r\n\t\telem = elem.parentElement;\r\n\t}\r\n\r\n\treturn elem;\r\n};\r\n\r\nexport default Element;\r\n","/*\r\n**\triza/api\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport base64 from 'base-64';\r\nimport _fetch from 'node-fetch';\r\n\r\nif (!('fetch' in global))\r\n\tglobal.fetch = _fetch;\r\n\r\n/**\r\n**\tAPI interface utility functions.\r\n*/\r\n\r\nconst Api =\r\n{\r\n\t/**\r\n\t**\tFlags constants.\r\n\t*/\r\n\tREQUEST_PACKAGE_SUPPORTED:\t0x01,\r\n\tREQ64_SUPPORTED: \t\t\t0x02,\r\n\tJSON_RESPONSE_SUPPORTED: \t0x04,\r\n\tXML_RESPONSE_SUPPORTED: \t0x08,\r\n\tINCLUDE_CREDENTIALS:\t\t0x10,\r\n\r\n\t/**\r\n\t**\tTarget URL for all the API requests. Set by calling `setEndPoint`.\r\n\t*/\r\n\tapiUrl: \"/api\",\r\n\r\n\t/**\r\n\t**\tCapabilities flag.\r\n\t*/\r\n\tflags: 0,\r\n\r\n\t/**\r\n\t**\tIndicates if all request data will be packed into a req64 parameter instead of individual fields.\r\n\t*/\r\n\tuseReq64: false,\r\n\r\n\t/**\r\n\t**\tNumber of retries to execute each API call before giving up and invoking error handlers.\r\n\t*/\r\n\tretries: 0,\r\n\r\n\t/**\r\n\t**\tHeaders for the request.\r\n\t*/\r\n\theaders: { },\r\n\r\n\t/**\r\n\t**\tLevel of the current request. Used to detect nested requests.\r\n\t*/\r\n\t_requestLevel: 0,\r\n\r\n\t/**\r\n\t**\tIndicates if all API calls should be bundled in a request package. Activated by calling the packageBegin() function and finished with packageEnd().\r\n\t*/\r\n\t_requestPackage: 0,\r\n\r\n\t/**\r\n\t**\tWhen in package-mode, this contains the package data to be sent upon a call to packageEnd().\r\n\t*/\r\n\t_packageData: [],\r\n\r\n\t/**\r\n\t**\tSets the API end-point URL address.\r\n\t*/\r\n\tsetEndPoint: function (apiUrl, flags=null)\r\n\t{\r\n\t\tif (flags === null)\r\n\t\t\tflags = Api.REQUEST_PACKAGE_SUPPORTED | Api.REQ64_SUPPORTED | Api.JSON_RESPONSE_SUPPORTED | Api.XML_RESPONSE_SUPPORTED | Api.INCLUDE_CREDENTIALS;\r\n\r\n\t\tthis.apiUrl = apiUrl;\r\n\t\tthis.flags = flags;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t**\tOverridable filter that processes the response from the server and returns true if it was successful. The `res` parameter indicates the response data, and `req` the request data.\r\n\t*/\r\n\tresponseFilter: function (res, req)\r\n\t{\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t**\tStarts \"package-mode\" (using the `rpkg` field). Any API calls after this will be bundled together.\r\n\t*/\r\n\tpackageBegin: function ()\r\n\t{\r\n\t\tif (!(this.flags & Api.REQUEST_PACKAGE_SUPPORTED))\r\n\t\t\treturn;\r\n\r\n\t\tthis._requestPackage++;\r\n\t},\r\n\r\n\t/**\r\n\t**\tFinishes \"package-mode\" and a single API request with the currently constructed package will be sent.\r\n\t*/\r\n\tpackageEnd: function (callback)\r\n\t{\r\n\t\tif (!(this.flags & Api.REQUEST_PACKAGE_SUPPORTED))\r\n\t\t\treturn;\r\n\r\n\t\tif (!this._requestPackage)\r\n\t\t\treturn;\r\n\r\n\t\tif (--this._requestPackage)\r\n\t\t\treturn;\r\n\r\n\t\tthis.packageSend(callback);\r\n\t},\r\n\r\n\t/**\r\n\t**\tStarts package-mode, executes the callback and finishes package-mode. Therefore any requests made by the callback will be packed together.\r\n\t*/\r\n\tpackRequests: function (callback, responseCallback=null)\r\n\t{\r\n\t\tif (!(this.flags & Api.REQUEST_PACKAGE_SUPPORTED))\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.packageBegin();\r\n\t\tcallback();\r\n\t\tthis.packageEnd(responseCallback);\r\n\t},\r\n\r\n\t/**\r\n\t**\tSends a single API request with the currently constructed package and maintains package-mode.\r\n\t*/\r\n\tpackageSend: function (callback)\r\n\t{\r\n\t\tif (!(this.flags & Api.REQUEST_PACKAGE_SUPPORTED))\r\n\t\t\treturn;\r\n\r\n\t\tif (!this._packageData.length)\r\n\t\t\treturn;\r\n\r\n\t\tlet _packageData = this._packageData;\r\n\t\tthis._packageData = [];\r\n\r\n\t\tvar rpkg = \"\";\r\n\r\n\t\tfor (var i = 0; i < _packageData.length; i++)\r\n\t\t\trpkg += \"r\"+i+\",\"+base64.encode(this.encodeParams(_packageData[i][2]))+\";\";\r\n\r\n\t\tthis._showProgress();\r\n\r\n\t\tthis.apiCall (\r\n\t\t\t{ rpkg: rpkg },\r\n\r\n\t\t\t(res, req) =>\r\n\t\t\t{\r\n\t\t\t\tthis._hideProgress();\r\n\r\n\t\t\t\tfor (let i = 0; i < _packageData.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar response = res[\"r\"+i];\r\n\t\t\t\t\t\tif (!response)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (_packageData[i][1] != null) _packageData[i][1] (_packageData[i][2]);\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (_packageData[i][0] != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (this.responseFilter (response, _packageData[i][2]))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t_packageData[i][0] (response, _packageData[i][2]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e) {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (callback) callback();\r\n\t\t\t},\r\n\r\n\t\t\t(req) =>\r\n\t\t\t{\r\n\t\t\t\tthis._hideProgress();\r\n\r\n\t\t\t\tfor (let i = 0; i < _packageData.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (_packageData[i][1] != null) _packageData[i][1] (_packageData[i][2]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\r\n\t/**\r\n\t**\tAdds CSS class 'busy' to the HTML root element, works only if running inside a browser.\r\n\t*/\r\n\t_showProgress: function ()\r\n\t{\r\n\t\tif ('document' in global) {\r\n\t\t\tthis._requestLevel++;\r\n\t\t\tif (this._requestLevel > 0) global.document.documentElement.classList.add('busy');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t**\tRemoves the 'busy' CSS class from the HTML element.\r\n\t*/\r\n\t_hideProgress: function ()\r\n\t{\r\n\t\tif ('document' in global)\r\n\t\t{\r\n\t\t\tthis._requestLevel--;\r\n\t\t\tif (this._requestLevel) return;\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (this._requestLevel === 0)\r\n\t\t\t\t\tglobal.document.documentElement.classList.remove('busy');\r\n\t\t\t}, 250);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * \tSets an HTTP header.\r\n\t */\r\n\theader: function (name, value)\r\n\t{\r\n\t\tif (value === null)\r\n\t\t\tdelete this.headers[name];\r\n\t\telse\r\n\t\t\tthis.headers[name] = value;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t**\tReturns a parameter string for a GET request given an object with fields.\r\n\t*/\r\n\tencodeParams: function (obj)\r\n\t{\r\n\t\tlet s = [];\r\n\r\n\t\tif (obj instanceof FormData)\r\n\t\t{\r\n\t\t\tfor (let i of obj.entries())\r\n\t\t\t\ts.push(encodeURIComponent(i[0]) + '=' + encodeURIComponent(i[1]));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tfor (let i in obj)\r\n\t\t\t\ts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));\r\n\t\t}\r\n\r\n\t\treturn s.join('&');\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes an API call to the URL stored in the `apiUrl` property. By default `httpMethod` is \"auto\", which will determine the best depending on the data to\r\n\t**\tbe sent. Any connection error will be reported to the `failure` callback, and similarly any success to the `success` callback. The `params` object can be\r\n\t**\ta FormData object or just a regular object.\r\n\t*/\r\n\tapiCall: function (params, success, failure, httpMethod, retries)\r\n\t{\r\n\t\tlet url = this.apiUrl + '?_=' + Date.now();\r\n\r\n\t\tif (httpMethod)\r\n\t\t{\r\n\t\t\thttpMethod = httpMethod.toUpperCase();\r\n\r\n\t\t\tif (httpMethod != 'GET' && httpMethod != 'POST')\r\n\t\t\t\thttpMethod = 'auto';\r\n\t\t}\r\n\t\telse\r\n\t\t\thttpMethod = 'auto';\r\n\r\n\t\tif (retries === undefined)\r\n\t\t\tretries = this.retries;\r\n\r\n\t\tif (this._requestPackage && (this.flags & Api.REQUEST_PACKAGE_SUPPORTED))\r\n\t\t{\r\n\t\t\tif (!(params instanceof FormData))\r\n\t\t\t\tparams = {...params};\r\n\r\n\t\t\tthis._packageData.push([success, failure, params]);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._showProgress();\r\n\r\n\t\tlet data = params;\r\n\r\n\t\tlet options =\r\n\t\t{\r\n\t\t\tmode: 'cors',\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'text/html,application/xhtml+xml,application/xml,application/json;q=0.9',\r\n\t\t\t\t...this.headers\r\n\t\t\t},\r\n\t\t\tmethod: httpMethod,\r\n\t\t\tbody: null,\r\n\t\t\tmultipart: false\r\n\t\t};\r\n\r\n\t\tif (this.flags & Api.INCLUDE_CREDENTIALS)\r\n\t\t\toptions.credentials = 'include';\r\n\r\n\t\tif (typeof(data) !== 'string' && !(data instanceof Blob))\r\n\t\t{\r\n\t\t\tif (!(data instanceof FormData))\r\n\t\t\t{\r\n\t\t\t\tdata = new FormData();\r\n\r\n\t\t\t\tfor (let i in params)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((params[i] instanceof File) || (params[i] instanceof Blob))\r\n\t\t\t\t\t\tdata.append(i, params[i], params[i].name);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tdata.append(i, params[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i of data.entries())\r\n\t\t\t{\r\n\t\t\t\tif ((i[1] instanceof File) || (i[1] instanceof Blob))\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.method = 'POST';\r\n\t\t\t\t\toptions.multipart = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.useReq64 && (this.flags & Api.REQ64_SUPPORTED) && !options.multipart)\r\n\t\t\t{\r\n\t\t\t\tlet tmp = new FormData();\r\n\t\t\t\ttmp.append('req64', base64.encode(this.encodeParams(data)));\r\n\t\t\t\tdata = tmp;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.method == 'auto')\r\n\t\t\t{\r\n\t\t\t\tlet l = 0;\r\n\r\n\t\t\t\toptions.method = 'GET';\r\n\r\n\t\t\t\tfor (let i of data.entries())\r\n\t\t\t\t{\r\n\t\t\t\t\tl += i[0].length + i[1].length + 2;\r\n\r\n\t\t\t\t\tif (l > 960)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions.method = 'POST';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\r\n\t\t\tif (options.method == 'GET')\r\n\t\t\t{\r\n\t\t\t\turl += '&' + this.encodeParams(data);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (!options.multipart)\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.headers['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\t\t\t\t\toptions.body = this.encodeParams(data);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\toptions.body = data;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (typeof(data) === 'string')\r\n\t\t\t{\r\n\t\t\t\tif (data[0] === '<')\r\n\t\t\t\t{\r\n\t\t\t\t\tif (data.endsWith('</soap:Envelope>'))\r\n\t\t\t\t\t\toptions.headers['Content-Type'] = 'application/soap+xml';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\toptions.headers['Content-Type'] = 'application/xml';\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (data[0] === '{')\r\n\t\t\t\t\t\toptions.headers['Content-Type'] = 'application/json';\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\toptions.headers['Content-Type'] = 'application/octet-stream';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\toptions.headers['Content-Type'] = data.type;\r\n\r\n\t\t\toptions.body = data;\r\n\t\t}\r\n\r\n\t\tglobal.fetch(url, options)\r\n\t\t.then(result => this.decodeResult(result))\r\n\t\t.then(result =>\r\n\t\t{\r\n\t\t\tthis._hideProgress();\r\n\t\t\tif (!success) return\r\n\r\n\t\t\tif (this.responseFilter(result, params)) {\r\n\t\t\t\ttry { success(result, params); } catch(e) { }\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err =>\r\n\t\t{\r\n\t\t\tthis._hideProgress();\r\n\r\n\t\t\tif (retries == 0) {\r\n\t\t\t\tif (failure) failure(params);\r\n\t\t\t} else {\r\n\t\t\t\tthis.apiCall (data, success, failure, httpMethod, retries-1);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t**\tDecodes a result obtained using fetch into a usable object.\r\n\t*/\r\n\tdecodeResult: function (result)\r\n\t{\r\n\t\tlet type = result.headers.get('content-type').split(';')[0].toLowerCase();\r\n\r\n\t\tif ((this.flags & Api.JSON_RESPONSE_SUPPORTED) && type.indexOf('json') !== -1)\r\n\t\t\treturn result.json();\r\n\r\n\t\tif ((this.flags & Api.XML_RESPONSE_SUPPORTED) && type.indexOf('xml') !== -1)\r\n\t\t{\r\n\t\t\treturn new Promise((resolve, reject) =>\r\n\t\t\t{\r\n\t\t\t\tresult.text().then(data =>\r\n\t\t\t\t{\r\n\t\t\t\t\tdata = (new DOMParser).parseFromString(data, 'text/xml');\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reject);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn result.blob();\r\n\t},\r\n\r\n\t/**\r\n\t**\tMakes a blob with the specified data and type.\r\n\t*/\r\n\tgetBlob: function (data, type)\r\n\t{\r\n\t\treturn new Blob ([data], { type: type });\r\n\t},\r\n\r\n\t/**\r\n\t**\tProvided access to the base64 module to encode/decode data.\r\n\t*/\r\n\tbase64:\r\n\t{\r\n\t\tencode: function (value)\r\n\t\t{\r\n\t\t\treturn base64.encode(value);\r\n\t\t},\r\n\r\n\t\tdecode: function (value)\r\n\t\t{\r\n\t\t\treturn base64.decode(value);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes a POST API call.\r\n\t*/\r\n\tpost: function (params, success, failure)\r\n\t{\r\n\t\treturn this.apiCall(params, success, failure, 'POST');\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes a GET API call.\r\n\t*/\r\n\tget: function (params, success, failure)\r\n\t{\r\n\t\treturn this.apiCall(params, success, failure, 'GET');\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes an automatic API call, returns a promise.\r\n\t*/\r\n\tfetch: function (params)\r\n\t{\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.apiCall(params, resolve, reject);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t**\tExecutes an automatic API call, returns a promise.\r\n\t*/\r\n\tmakeUrl: function (data)\r\n\t{\r\n\t\treturn this.apiUrl + (this.apiUrl.indexOf('?') == -1 ? '?' : '&') + this.encodeParams(data);\r\n\t}\r\n};\r\n\r\nexport default Api;\r\n","/*\r\n**\triza/data-source\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport { Model, ModelList, EventDispatcher } from 'rinn';\r\nimport Api from './api.js';\r\n\r\n/*\r\n**\tProvides several methods to quickly interface with a remote data-source as defined by Wind.\r\n*/\r\n\r\nexport default EventDispatcher.extend\r\n({\r\n\tclassName: 'DataSource',\r\n\tdebounceDelay: 250,\r\n\r\n\trequest: null,\r\n\r\n\tincludeCount: false,\r\n\tincludeEnum: false,\r\n\tincludeList: true,\r\n\r\n\teid: null,\r\n\tcount: 0,\r\n\tlist: null,\r\n\tenum: null,\r\n\r\n\t/*\r\n\t**\tConstructs the data source with the specified optional `config` parameters, any of the properties of this object can be specified\r\n\t**\tin the config. Uses the given basePath as prefix for the `f` parameter for subsequent API operations, a basePath of `candies` will\r\n\t**\tresult in calls to `candies.list`, `candies.count`, etc.\r\n\t*/\r\n\t__ctor: function (basePath, config)\r\n\t{\r\n\t\tthis._super.EventDispatcher.__ctor();\r\n\r\n\t\tthis.basePath = basePath;\r\n\r\n\t\tif (config) Object.assign(this, config);\r\n\r\n\t\tthis.request = new Model(this.request);\r\n\r\n\t\tthis.eid = Math.random().toString().substr(2);\r\n\t\tthis.count = 0;\r\n\r\n\t\tthis.list = new ModelList();\r\n\t\tthis.list.dataSource = this;\r\n\r\n\t\tthis.enum = new ModelList();\r\n\t\tthis.enum.dataSource = this;\r\n\r\n\t\tthis.request.addEventListener (this.eid+':propertyChanged', this.forwardRequestEvent, this);\r\n\r\n\t\tthis.list.addEventListener (this.eid+':itemsCleared', this.forwardListEvent, this);\r\n\t\tthis.list.addEventListener (this.eid+':itemsChanged', this.forwardListEvent, this);\r\n\t\tthis.list.addEventListener (this.eid+':itemRemoved', this.forwardListEvent, this);\r\n\t\tthis.list.addEventListener (this.eid+':itemChanged', this.forwardListEvent, this);\r\n\t\tthis.list.addEventListener (this.eid+':itemAdded', this.forwardListEvent, this);\r\n\r\n\t\tthis.enum.addEventListener (this.eid+':itemsCleared', this.forwardEnumEvent, this);\r\n\t\tthis.enum.addEventListener (this.eid+':itemsChanged', this.forwardEnumEvent, this);\r\n\t\tthis.enum.addEventListener (this.eid+':itemRemoved', this.forwardEnumEvent, this);\r\n\t\tthis.enum.addEventListener (this.eid+':itemChanged', this.forwardEnumEvent, this);\r\n\t\tthis.enum.addEventListener (this.eid+':itemAdded', this.forwardEnumEvent, this);\r\n\t},\r\n\r\n\tforwardRequestEvent: function (evt, args)\r\n\t{\r\n\t\tthis.prepareEvent('request' + evt.name[0].toUpperCase() + evt.name.substr(1), args).setSource(evt.source).resume();\r\n\t},\r\n\r\n\tforwardListEvent: function (evt, args)\r\n\t{\r\n\t\tthis.prepareEvent('list' + evt.name[0].toUpperCase() + evt.name.substr(1), args).setSource(evt.source).resume();\r\n\t},\r\n\r\n\tforwardEnumEvent: function (evt, args)\r\n\t{\r\n\t\tthis.prepareEvent('enum' + evt.name[0].toUpperCase() + evt.name.substr(1), args).setSource(evt.source).resume();\r\n\t},\r\n\r\n\t/*\r\n\t**\tExecutes one or more API functions (depending on `includeCount`, `includeEnum` and `includeList` properties) to retrieve the\r\n\t**\trequired data (uses debounce to prevent too-quick refreshes).\r\n\t**\r\n\t**\tRefresh mode can be: order, filter, range or full. Setting `mode` to `true` will cause a full refresh without debouncing.\r\n\t*/\r\n\trefresh: function (mode='full', callback=null)\r\n\t{\r\n\t\tif (typeof(mode) == 'function')\r\n\t\t{\r\n\t\t\tcallback = mode;\r\n\t\t\tmode = 'full';\r\n\t\t}\r\n\r\n\t\tif (this._timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t\tthis._timeout = null;\r\n\t\t}\r\n\r\n\t\tconst fn = () =>\r\n\t\t{\r\n\t\t\tthis._timeout = null;\r\n\r\n\t\t\tApi.packageBegin();\r\n\r\n\t\t\tif (this.includeCount && (mode == 'full' || mode == 'filter')) this.fetchCount();\r\n\t\t\tif (this.includeEnum && (mode == 'full')) this.fetchEnum();\r\n\t\t\tif (this.includeList) this.fetchList();\r\n\r\n\t\t\tApi.packageEnd(callback);\r\n\t\t};\r\n\r\n\t\tif (mode === true)\r\n\t\t{\r\n\t\t\tmode = 'full';\r\n\t\t\tfn();\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis._timeout = setTimeout(fn, this.debounceDelay);\r\n\t},\r\n\r\n\t/*\r\n\t**\tSearches for the item in `list` that matches the specified `fields` and sends it to the callback. If no item is found (or if `forced` is true),\r\n\t**\ta call to API function `.get` will be executed with the fields as request parameters. Returns a promise.\r\n\t*/\r\n\tfetch: function (fields, forced=false)\r\n\t{\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tlet item = forced == true ? null : this.list.find(fields, true);\r\n\t\t\tif (!item)\r\n\t\t\t{\r\n\t\t\t\tthis.fetchOne(fields, (r) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (r && r.response == 200)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (r.data.length > 0)\r\n\t\t\t\t\t\t\tresolve(r.data[0]);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treject(r);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treject(r);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tresolve(item.get());\r\n\t\t});\r\n\t},\r\n\r\n\t/*\r\n\t**\tRemoves an item from the remote data source by executing the `.delete` API function, passes the given `fields` as request\r\n\t**\tparameters. Returns a promise.\r\n\t*/\r\n\tdelete: function (params)\r\n\t{\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t{\r\n\t\t\tthis.fetchDelete(params, (r) =>\r\n\t\t\t{\r\n\t\t\t\tif (r.response == 200)\r\n\t\t\t\t\tresolve(r);\r\n\t\t\t\telse\r\n\t\t\t\t\treject(r.error);\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tfetchList: function ()\r\n\t{\r\n\t\tlet data = {...this.request.get()};\r\n\r\n\t\tdata.f = this.basePath + '.list';\r\n\r\n\t\tthis.dispatchEvent('listLoading');\r\n\r\n\t\tApi.fetch(data).then(r => {\r\n\t\t\tthis.list.setData(r.response == 200 ? r.data : null);\r\n\t\t\tthis.dispatchEvent('listLoaded');\r\n\t\t\tthis.dispatchEvent('listChanged');\r\n\t\t});\r\n\t},\r\n\r\n\tfetchEnum: function ()\r\n\t{\r\n\t\tlet data = {...this.request.get()};\r\n\r\n\t\tdata.f = this.basePath + '.enum';\r\n\r\n\t\tthis.dispatchEvent('enumLoading');\r\n\r\n\t\tApi.fetch(data).then(r => {\r\n\t\t\tthis.enum.setData(r.response == 200 ? r.data : null);\r\n\t\t\tthis.dispatchEvent('enumLoaded');\r\n\t\t\tthis.dispatchEvent('enumChanged');\r\n\t\t});\r\n\t},\r\n\r\n\tfetchCount: function ()\r\n\t{\r\n\t\tlet data = {...this.request.get()};\r\n\r\n\t\tdata.f = this.basePath + '.count';\r\n\r\n\t\tthis.dispatchEvent('countLoading');\r\n\r\n\t\tApi.fetch(data).then(r => {\r\n\t\t\tthis.count = r.response == 200 ? r.count : 0;\r\n\t\t\tthis.dispatchEvent('countLoaded');\r\n\t\t\tthis.dispatchEvent('countChanged');\r\n\t\t});\r\n\t},\r\n\r\n\tfetchOne: function (params, callback)\r\n\t{\r\n\t\tlet data = {...this.request.get(), ...params};\r\n\r\n\t\tdata.f = this.basePath + '.get';\r\n\r\n\t\tApi.fetch(data).then(r => {\r\n\t\t\tcallback(r);\r\n\t\t});\r\n\t},\r\n\r\n\tfetchDelete: function (params, callback)\r\n\t{\r\n\t\tlet data = {...this.request.get(), ...params};\r\n\r\n\t\tdata.f = this.basePath + '.delete';\r\n\r\n\t\tApi.fetch(data).then(r => {\r\n\t\t\tcallback(r);\r\n\t\t});\r\n\t},\r\n\r\n\tfetchData: function (params)\r\n\t{\r\n\t\tlet data = {...this.request.get(), ...params};\r\n\r\n\t\tif (data.f[0] == '.')\r\n\t\t\tdata.f = this.basePath + data.f;\r\n\r\n\t\treturn Api.fetch(data);\r\n\t},\r\n\r\n\tmakeUrl: function (params)\r\n\t{\r\n\t\tlet data = {...this.request.get(), ...params};\r\n\r\n\t\tif (data.f[0] == '.')\r\n\t\t\tdata.f = this.basePath + data.f;\r\n\r\n\t\treturn Api.makeUrl(data);\r\n\t}\r\n});\r\n","/*\r\n**\triza/data-list\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport { Model, ModelList } from 'rinn';\r\nimport Api from './api.js';\r\n\r\n/*\r\n**\tProvides an interface to connect with a listing API function.\r\n*/\r\n\r\nexport default ModelList.extend\r\n({\r\n\tclassName: 'DataList',\r\n\tdebounceDelay: 250,\r\n\r\n\trequest: null,\r\n\r\n\teid: null,\r\n\r\n\t/*\r\n\t**\tConstructs the data list with the specified optional `config` parameters, any of the properties of this object can be specified\r\n\t**\tin the config. The given `f` parameter is passed directly as a request parameter to the API.\r\n\t*/\r\n\t__ctor: function (f, config=null)\r\n\t{\r\n\t\tthis._super.ModelList.__ctor();\r\n\r\n\t\tif (config !==  null)\r\n\t\t\tObject.assign(this, config);\r\n\r\n\t\tif (!this.request)\r\n\t\t\tthis.request = { };\r\n\r\n\t\tthis.request.f = f;\r\n\t\tthis.request = new Model(this.request);\r\n\r\n\t\tthis.eid = Math.random().toString().substr(2);\r\n\t\tthis.dataList = this;\r\n\r\n\t\tthis.request.addEventListener (this.eid+':propertyChanged', this.forwardRequestEvent, this);\r\n\t},\r\n\r\n\tforwardRequestEvent: function (evt, args)\r\n\t{\r\n\t\tthis.prepareEvent('request' + evt.name[0].toUpperCase() + evt.name.substr(1), args).setSource(evt.source).resume();\r\n\t},\r\n\r\n\t/*\r\n\t**\tExecutes a request to retrieve the data for the list (uses debounce to prevent too-quick refreshes).\r\n\t*/\r\n\trefresh: function (callback=null, _callback=null)\r\n\t{\r\n\t\tif (this._timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this._timeout);\r\n\t\t\tthis._timeout = null;\r\n\t\t}\r\n\r\n\t\tif (callback === true)\r\n\t\t{\r\n\t\t\tthis.dispatchEvent('listLoading');\r\n\r\n\t\t\tApi.fetch(this.request.get()).then(r =>\r\n\t\t\t{\r\n\t\t\t\tthis.setData(r.response == 200 ? r.data : null);\r\n\t\t\t\tthis.dispatchEvent('listLoaded');\r\n\t\t\t\tthis.dispatchEvent('listChanged');\r\n\r\n\t\t\t\tif (_callback !== null)\r\n\t\t\t\t\t_callback();\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst fn = () => {\r\n\t\t\tthis.refresh(true, callback);\r\n\t\t};\r\n\r\n\t\tthis._timeout = setTimeout(fn, this.debounceDelay);\r\n\t}\r\n});\r\n","/*\n**\triza/easing\n**\n**\tCopyright (c) 2016-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/**\n**\tCollection of useful easing functions (imported from Cherry source code).\n*/\n\nconst Easing =\n{\n\t/**\n\t**\tInterpolates numeric values between two objects (`src` and `dst`) using the specified `duration` (in seconds) and `easing` function. Note that all four parameters\n\t**\t`src`, `dst`, `duration` and `easing` must be objects having the same number of values.\n\t*/\n\tinterpolate: function (src, dst, duration, easing, callback/* function(data, isFinished) */)\n\t{\n\t\tlet time = { };\n\t\tlet data = { };\n\t\tlet count = 0;\n\n\t\tfor (let x in src)\n\t\t{\n\t\t\ttime[x] = 0.0;\n\t\t\tdata[x] = src[x]\n\t\t\tcount++;\n\t\t}\n\n\t\tlet lastTime = Date.now()/1000;\n\t\tlet dt = 0;\n\n\t\tlet interpolator = function()\n\t\t{\n\t\t\tlet curTime = Date.now()/1000;\n\t\t\tdt = curTime - lastTime;\n\t\t\tlastTime = curTime;\n\n\t\t\tfor (let x in time)\n\t\t\t{\n\t\t\t\tif (time[x] == duration[x])\n\t\t\t\t\tcontinue;\n\n\t\t\t\ttime[x] += dt;\n\t\t\t\tif (time[x] >= duration[x])\n\t\t\t\t{\n\t\t\t\t\ttime[x] = duration[x];\n\t\t\t\t\tcount--;\n\t\t\t\t}\n\n\t\t\t\tlet t = easing[x] (time[x] / duration[x]);\n\t\t\t\tdata[x] = (1-t)*src[x] + t*dst[x];\n\t\t\t}\n\n\t\t\tcallback (data, count == 0);\n\n\t\t\tif (count != 0)\n\t\t\t\trequestAnimationFrame(interpolator);\n\t\t};\n\n\t\tinterpolator();\n\t},\n\n\t/* ******************************************** */\n\tLinear:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn t;\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\treturn t;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tBack:\n\t{\n\t\tk: 1.70158,\n\n\t\tIN: function (t, k)\n\t\t{\n\t\t\tif (k === undefined) k = Easing.Back.k;\n\t\t\treturn t*t*((k+1)*t - k);\n\t\t},\n\n\t\tOUT: function (t, k)\n\t\t{\n\t\t\treturn 1 - Easing.Back.IN(1 - t, k);\n\t\t},\n\n\t\tIN_OUT: function (t, k)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn Easing.Back.IN(t*2, k)/2;\n\t\t\telse\n\t\t\t\treturn Easing.Back.OUT((t-0.5)*2, k)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tBounce:\n\t{\n\t\tgetConst: function (t)\n\t\t{\n\t\t\tif (t < 1.0/2.75)\n\t\t\t\treturn 7.5625 * t * t;\n\t\t\telse if (t < 2.0/2.75)\n\t\t\t\treturn 7.5625 * (t -= 1.5/2.75)*t + 0.75;\n\t\t\telse if (t < 2.5/2.75)\n\t\t\t\treturn 7.5625 * (t -= 2.250/2.75) * t + 0.9375;\n\n\t\t\treturn 7.5625 * (t -= 2.625/2.75) * t + 0.984375;\n\t\t},\n\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Bounce.getConst(1-t);\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn Easing.Bounce.getConst(t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn (1 - Easing.Bounce.getConst(1-2*t))/2;\n\t\t\telse\n\t\t\t\treturn (Easing.Bounce.getConst((t-0.5)*2)/2)+0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tCirc:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn 1 - Math.sqrt(1 - t*t);\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Circ.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\t\treturn Easing.Circ.IN(t*2)/2;\n\t\t\t\telse\n\t\t\t\t\treturn Easing.Circ.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tCubic:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t*t*t;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Cubic.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn Easing.Cubic.IN(t*2)/2;\n\t\t\telse\n\t\t\t\treturn Easing.Cubic.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tExpo:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn Math.pow(2, 12*(t-1));\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn -Math.pow(2, -12*t) + 1;\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif ((t *= 2) < 1)\n\t\t\t\treturn Math.pow (2, 12 * (t - 1)) / 2;\n\t\t\telse\n\t\t\t\treturn (-Math.pow (2, -12 * (t - 1)) + 2) / 2;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tPower:\n\t{\n\t\tp: 12,\n\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn Math.pow(t, Easing.Power.p);\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Power.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn Easing.Power.IN(t*2)/2;\n\t\t\telse\n\t\t\t\treturn Easing.Power.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tQuad:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t*t;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Quad.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn Easing.Quad.IN(t*2)/2;\n\t\t\telse\n\t\t\t\treturn Easing.Quad.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tQuartic:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t*t*t*t;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Quartic.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\treturn Easing.Quartic.IN(t*2)/2;\n\t\t\telse\n\t\t\t\treturn Easing.Quartic.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tQuintic:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t*t*t*t*t;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn 1 - Easing.Quintic.IN(1 - t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\tif (t < 0.5)\n\t\t\t\t\treturn Easing.Quintic.IN(t*2)/2;\n\t\t\t\telse\n\t\t\t\t\treturn Easing.Quintic.OUT((t-0.5)*2)/2 + 0.5;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tSine:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn 1 - Math.sin (1.5708 * (1 - t));\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn Math.sin (1.5708 * t);\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\treturn (Math.cos (3.1416*t) - 1) / -2;\n\t\t}\n\t},\n\n\t/* ******************************************** */\n\tStep:\n\t{\n\t\tIN: function (t)\n\t\t{\n\t\t\treturn t != 1.0 ? 0 : 1.0;\n\t\t},\n\n\t\tOUT: function (t)\n\t\t{\n\t\t\treturn t != 1.0 ? 0 : 1.0;\n\t\t},\n\n\t\tIN_OUT: function (t)\n\t\t{\n\t\t\treturn t != 1.0 ? 0 : 1.0;\n\t\t}\n\t}\n};\n\nexport default Easing;\n","/*\n**\triza/anim\n**\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport { Rinn, Class } from 'rinn';\n\n/**\n**\tClass to animate properties using rules (imported from Cherry source code).\n*/\n\nconst Anim = Class.extend\n({\n\tlist: null,\n\n\tinitialData: null,\n\tdata: null,\n\n\tstack: null,\n\tblock: null,\n\n\ttimeScale: 1, time: 0, blockTime: 0,\n\tindex: 0,\n\n\tpaused: false,\n\tfinished: false,\n\n\tonFinishedCallback: null,\n\tonUpdatedCallback: null,\n\n\t__ctor: function ()\n\t{\n\t\tthis.list = [ ];\n\n\t\tthis.initialData = { };\n\t\tthis.data = { };\n\n\t\tthis.stack = [ ];\n\t\tthis.block = this.list;\n\n\t\tthis.reset();\n\t},\n\n\t__dtor: function ()\n\t{\n\t},\n\n\tclone: function ()\n\t{\n\t\tlet a = new Anim();\n\n\t\ta.list = this.list;\n\t\ta.initialData = this.initialData;\n\n\t\treturn a.reset();\n\t},\n\n\tonFinished: function (callback)\n\t{\n\t\tthis.onFinishedCallback = callback;\n\t\treturn this;\n\t},\n\n\tonUpdated: function (callback)\n\t{\n\t\tthis.onUpdatedCallback = callback;\n\t\treturn this;\n\t},\n\n\t// Resets the animation to its initial state.\n\treset: function ()\n\t{\n\t\tthis.stack.length = 0;\n\t\tthis.blockTime = 0;\n\n\t\tthis.time = 0;\n\t\tthis.index = 0;\n\n\t\tthis.block = this.list;\n\n\t\tthis.paused = true;\n\t\tthis.finished = false;\n\t\tthis.handle = null;\n\n\t\tfor (let i in this.initialData)\n\t\t\tthis.data[i] = this.initialData[i];\n\n\t\treturn this;\n\t},\n\n\t// Sets the initial data.\n\tinitial: function (data)\n\t{\n\t\tthis.initialData = data;\n\t\treturn this.reset();\n\t},\n\n\t// Sets the time scale (animation speed).\n\tspeed: function (value)\n\t{\n\t\tthis.timeScale = value > 0.0 ? value : 1.0;\n\t\treturn this;\n\t},\n\n\t// Sets the output data object.\n\tsetOutput: function (data)\n\t{\n\t\tthis.data = data;\n\t\treturn this;\n\t},\n\n\t// Pauses the animation.\n\tpause: function ()\n\t{\n\t\tif (this.paused) return;\n\n\t\tclearInterval(this.handle);\n\t\tthis.paused = true;\n\t},\n\n\t// Resumes the animation.\n\tresume: function ()\n\t{\n\t\tif (!this.paused) return;\n\n\t\tlet lastTime = Date.now()/1000;\n\n\t\tthis.handle = setInterval(() =>\n\t\t{\n\t\t\tlet curTime = Date.now()/1000;\n\t\t\tlet dt = curTime - lastTime;\n\t\t\tlastTime = curTime;\n\n\t\t\tthis.update(dt);\n\n\t\t\tif (this.onUpdatedCallback)\n\t\t\t\tthis.onUpdatedCallback (this.data, this);\n\t\t},\n\t\t16);\n\n\t\tif (this.onUpdatedCallback)\n\t\t\tthis.onUpdatedCallback (this.data, this);\n\n\t\tthis.paused = false;\n\t},\n\n\t// Updates the animation by the specified delta time (seconds).\n\tupdate: function (dt)\n\t{\n\t\tif (this.paused) return false;\n\n\t\tif (this.index >= this.block.length)\n\t\t\treturn true;\n\n\t\tlet i = 0;\n\n\t\tlet _block;\n\t\tlet _index;\n\t\tlet _blockTime;\n\n\t\tthis.time += dt*this.timeScale;\n\n\t\twhile (this.index < this.block.length)\n\t\t{\n\t\t\tlet cmd = this.block[this.index];\n\t\t\tlet duration;\n\n\t\t\tswitch (cmd.op)\n\t\t\t{\n\t\t\t\tcase \"parallel\":\n\t\t\t\t\tif (cmd.started == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd.blocks.length = 0;\n\t\t\t\t\t\tcmd.started = true;\n\n\t\t\t\t\t\tfor (i = 0; i < cmd.block.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcmd.blocks.push([cmd.block[i]]);\n\t\t\t\t\t\t\tcmd.indices[i] = 0;\n\t\t\t\t\t\t\tcmd.blockTimes[i] = this.blockTime;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t_block = this.block;\n\t\t\t\t\t_index = this.index;\n\t\t\t\t\t_blockTime = this.blockTime;\n\n\t\t\t\t\tlet n = 0;\n\t\t\t\t\tlet blockTime = _blockTime;\n\n\t\t\t\t\tfor (i = 0; i < cmd.blocks.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.block = cmd.blocks[i];\n\t\t\t\t\t\tthis.index = cmd.indices[i];\n\t\t\t\t\t\tthis.blockTime = cmd.blockTimes[i];\n\n\t\t\t\t\t\tif (this.update(0) === true)\n\t\t\t\t\t\t\tn++;\n\n\t\t\t\t\t\tif (this.blockTime > blockTime)\n\t\t\t\t\t\t\tblockTime = this.blockTime;\n\n\t\t\t\t\t\tcmd.blockTimes[i] = this.blockTime;\n\t\t\t\t\t\tcmd.blocks[i] = this.block;\n\t\t\t\t\t\tcmd.indices[i] = this.index;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.block = _block;\n\t\t\t\t\tthis.index = _index;\n\t\t\t\t\tthis.blockTime = _blockTime;\n\n\t\t\t\t\tif (cmd.fn) cmd.fn.call(this);\n\n\t\t\t\t\tif (n != cmd.blocks.length)\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\tcmd.started = false;\n\n\t\t\t\t\tthis.blockTime = blockTime;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"serial\":\n\t\t\t\t\tif (cmd.started == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd._block = cmd.block;\n\t\t\t\t\t\tcmd._index = 0;\n\t\t\t\t\t\tcmd._blockTime = this.blockTime;\n\n\t\t\t\t\t\tcmd.started = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t_block = this.block;\n\t\t\t\t\t_index = this.index;\n\t\t\t\t\t_blockTime = this.blockTime;\n\n\t\t\t\t\tthis.block = cmd._block;\n\t\t\t\t\tthis.index = cmd._index;\n\t\t\t\t\tthis.blockTime = cmd._blockTime;\n\n\t\t\t\t\ti = this.update(0);\n\n\t\t\t\t\tcmd._block = this.block;\n\t\t\t\t\tcmd._index = this.index;\n\t\t\t\t\tcmd._blockTime = this.blockTime;\n\n\t\t\t\t\tthis.block = _block;\n\t\t\t\t\tthis.index = _index;\n\t\t\t\t\tthis.blockTime = _blockTime;\n\n\t\t\t\t\tif (cmd.fn) cmd.fn.call(this);\n\n\t\t\t\t\tif (i !== true) return false;\n\n\t\t\t\t\tcmd.started = false;\n\n\t\t\t\t\tthis.blockTime = cmd._blockTime;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"repeat\":\n\t\t\t\t\tif (cmd.started == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd._block = cmd.block;\n\t\t\t\t\t\tcmd._index = 0;\n\t\t\t\t\t\tcmd._blockTime = this.blockTime;\n\t\t\t\t\t\tcmd._count = cmd.count;\n\n\t\t\t\t\t\tcmd.started = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t_block = this.block;\n\t\t\t\t\t_index = this.index;\n\t\t\t\t\t_blockTime = this.blockTime;\n\n\t\t\t\t\tthis.block = cmd._block;\n\t\t\t\t\tthis.index = cmd._index;\n\t\t\t\t\tthis.blockTime = cmd._blockTime;\n\n\t\t\t\t\ti = this.update(0);\n\n\t\t\t\t\tcmd._block = this.block;\n\t\t\t\t\tcmd._index = this.index;\n\t\t\t\t\tcmd._blockTime = this.blockTime;\n\n\t\t\t\t\tthis.block = _block;\n\t\t\t\t\tthis.index = _index;\n\t\t\t\t\tthis.blockTime = _blockTime;\n\n\t\t\t\t\tif (cmd.fn) cmd.fn.call(this);\n\n\t\t\t\t\tif (i !== true) return false;\n\n\t\t\t\t\tif (cmd._count <= 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd.started = false;\n\n\t\t\t\t\t\tthis.blockTime = cmd._blockTime;\n\t\t\t\t\t\tthis.index++;\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd._index = 0;\n\t\t\t\t\t\tcmd._count--;\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"set\":\n\t\t\t\t\tthis.data[cmd.field] = cmd.value;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"restart\":\n\t\t\t\t\tthis.index = 0;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"wait\":\n\t\t\t\t\tduration = Rinn.typeOf(cmd.duration) == \"string\" ? this.data[cmd.duration] : cmd.duration;\n\n\t\t\t\t\tif (this.time < this.blockTime + duration)\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\tthis.blockTime += duration;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"range\":\n\t\t\t\t\tif (cmd.started == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (cmd.startValue === null)\n\t\t\t\t\t\t\tcmd._startValue = this.data[cmd.field];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcmd._startValue = cmd.startValue;\n\n\t\t\t\t\t\tcmd._endValue = cmd.endValue;\n\n\t\t\t\t\t\tcmd.started = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tduration = Rinn.typeOf(cmd.duration) == \"string\" ? this.data[cmd.duration] : cmd.duration;\n\n\t\t\t\t\tif (this.time < this.blockTime + duration)\n\t\t\t\t\t\tdt = (this.time - this.blockTime) / duration;\n\t\t\t\t\telse\n\t\t\t\t\t\tdt = 1;\n\n\t\t\t\t\tif (cmd.easing && dt != 1.0)\n\t\t\t\t\t\tthis.data[cmd.field] = cmd.easing(dt)*(cmd._endValue - cmd._startValue) + cmd._startValue;\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.data[cmd.field] = dt*(cmd._endValue - cmd._startValue) + cmd._startValue;\n\n\t\t\t\t\tif (dt != 1) return false;\n\n\t\t\t\t\tcmd.started = false;\n\n\t\t\t\t\tthis.blockTime += duration;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"rand\":\n\t\t\t\t\tif (cmd.started == false)\n\t\t\t\t\t{\n\t\t\t\t\t\tcmd.started = true;\n\t\t\t\t\t\tcmd.last = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tduration = Rinn.typeOf(cmd.duration) == \"string\" ? this.data[cmd.duration] : cmd.duration;\n\n\t\t\t\t\tif (this.time < this.blockTime + duration)\n\t\t\t\t\t\tdt = (this.time - this.blockTime) / duration;\n\t\t\t\t\telse\n\t\t\t\t\t\tdt = 1;\n\n\t\t\t\t\tif (cmd.easing && dt != 1)\n\t\t\t\t\t\tcmd.cur = ~~(cmd.easing(dt)*cmd.count);\n\t\t\t\t\telse\n\t\t\t\t\t\tcmd.cur = ~~(dt*cmd.count);\n\n\t\t\t\t\tif (cmd.cur != cmd.last)\n\t\t\t\t\t{\n\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\ti = ~~(Math.random()*(cmd.endValue - cmd.startValue + 1)) + cmd.startValue;\n\t\t\t\t\t\t\tif (i != this.data[cmd.field]) break;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.data[cmd.field] = i;\n\t\t\t\t\t\tcmd.last = cmd.cur;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dt != 1) return false;\n\n\t\t\t\t\tcmd.started = false;\n\n\t\t\t\t\tthis.blockTime += duration;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"randt\":\n\t\t\t\t\tduration = Rinn.typeOf(cmd.duration) == \"string\" ? this.data[cmd.duration] : cmd.duration;\n\n\t\t\t\t\tif (this.time < this.blockTime + duration)\n\t\t\t\t\t\tdt = (this.time - this.blockTime) / duration;\n\t\t\t\t\telse\n\t\t\t\t\t\tdt = 1;\n\n\t\t\t\t\tif (cmd.easing && dt != 1)\n\t\t\t\t\t\ti = cmd.easing(dt)*(cmd.count-1);\n\t\t\t\t\telse\n\t\t\t\t\t\ti = dt*(cmd.count-1);\n\n\t\t\t\t\tthis.data[cmd.field] = cmd.table[~~((i + cmd.count) % cmd.count)];\n\n\t\t\t\t\tif (dt != 1) return false;\n\n\t\t\t\t\tthis.blockTime += duration;\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"play\":\n\t\t\t\t\tcmd.snd.play();\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"exec\":\n\t\t\t\t\tcmd.fn.call(this, this);\n\t\t\t\t\tthis.index++;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.block == this.list)\n\t\t{\n\t\t\tif (!this.finished && this.onFinishedCallback != null)\n\t\t\t\tthis.onFinishedCallback();\n\n\t\t\tthis.pause();\n\t\t\tthis.finished = true;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t// Runs the subsequent commands in parallel. Should end the parallel block by calling end().\n\tparallel: function ()\n\t{\n\t\tlet block = [ ];\n\n\t\tthis.block.push({ op: \"parallel\", started: false, block: block, blocks: [ ], indices: [ ], blockTimes: [ ] });\n\n\t\tthis.stack.push (this.block);\n\t\tthis.block = block;\n\n\t\treturn this;\n\t},\n\n\t// Runs the subsequent commands in series. Should end the serial block by calling end().\n\tserial: function ()\n\t{\n\t\tlet block = [ ];\n\n\t\tthis.block.push({ op: \"serial\", started: false, block: block });\n\n\t\tthis.stack.push (this.block);\n\t\tthis.block = block;\n\n\t\treturn this;\n\t},\n\n\t// Repeats a block the specified number of times.\n\trepeat: function (count)\n\t{\n\t\tlet block = [ ];\n\n\t\tthis.block.push({ op: \"repeat\", started: false, block: block, count: count });\n\n\t\tthis.stack.push (this.block);\n\t\tthis.block = block;\n\n\t\treturn this;\n\t},\n\n\t// Sets the callback of the current block.\n\tcallback: function (fn)\n\t{\n\t\tlet block = this.stack[this.stack.length-1];\n\t\tblock[block.length-1].fn = fn;\n\n\t\treturn this;\n\t},\n\n\t// Ends a parallel(), serial() or repeat() block.\n\tend: function ()\n\t{\n\t\tthis.block = this.stack.pop();\n\t\treturn this;\n\t},\n\n\t// Sets the value of a variable.\n\tset: function (field, value)\n\t{\n\t\tthis.block.push({ op: \"set\", field: field, value: value });\n\t\treturn this;\n\t},\n\n\t// Restarts the current block.\n\trestart: function (duration)\n\t{\n\t\tthis.block.push({ op: \"restart\" });\n\t\treturn this;\n\t},\n\n\t// Waits for the specified duration.\n\twait: function (duration)\n\t{\n\t\tthis.block.push({ op: \"wait\", duration: duration });\n\t\treturn this;\n\t},\n\n\t// Sets the range of a variable.\n\trange: function (field, duration, startValue, endValue, easing)\n\t{\n\t\tthis.block.push({ op: \"range\", started: false, field: field, duration: duration, startValue: startValue, endValue: endValue, easing: easing ? easing : null });\n\t\treturn this;\n\t},\n\n\t// Generates a certain amount of random numbers in the given range (inclusive).\n\trand: function (field, duration, count, startValue, endValue, easing)\n\t{\n\t\tthis.block.push({ op: \"rand\", started: false, field: field, duration: duration, count: count, startValue: startValue, endValue: endValue, easing: easing ? easing : null });\n\t\treturn this;\n\t},\n\n\t// Generates a certain amount of random numbers in the given range (inclusive). This uses a static random table to determine the next values.\n\trandt: function (field, duration, count, startValue, endValue, easing)\n\t{\n\t\tlet table = [ ];\n\n\t\tfor (let i = 0; i < count; i++)\n\t\t\ttable.push ((i % (endValue - startValue + 1)) + startValue);\n\n\t\tfor (let i = count >> 2; i > 0; i--)\n\t\t{\n\t\t\tlet a = ~~(Math.random() * count);\n\t\t\tlet b = ~~(Math.random() * count);\n\n\t\t\tlet c = table[b];\n\t\t\ttable[b] = table[a];\n\t\t\ttable[a] = c;\n\t\t}\n\n\t\tthis.block.push({ op: \"randt\", field: field, duration: duration, count: count, startValue: startValue, endValue: endValue, table: table, easing: easing ? easing : null });\n\t\treturn this;\n\t},\n\n\t// Plays a sound.\n\tplay: function (snd)\n\t{\n\t\tthis.block.push({ op: \"play\", snd: snd });\n\t\treturn this;\n\t},\n\n\t// Executes a function.\n\texec: function (fn)\n\t{\n\t\tthis.block.push({ op: \"exec\", fn: fn });\n\t\treturn this;\n\t}\n});\n\nexport default Anim;\n","/*\n**\telems/r-tabs\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-tabs data-container=\"div.tab-container\" data-base-route=\"@\" data-initial=\"tab1\">\n\t\t<a data-name=\"tab1\">Tab-1</a>\n\t\t<a data-name=\"tab2\">Tab-2</a>\n\t\t<a data-name=\"tab3\">Tab-3</a>\n\t</r-tabs>\n\n\t<div class=\"tab-container\">\n\t\t<div data-name=\"tab1\">\n\t\t\tThis is tab-1.\n\t\t</div>\n\n\t\t<div data-name=\"tab2\">\n\t\t\tThis is tab-2.\n\t\t</div>\n\n\t\t<div data-name=\"tab3\">\n\t\t\tThis is tab-3.\n\t\t</div>\n\t</div>\n\n\t.x-hidden {\n\t\tdisplay: none;\n\t}\n\n\tr-tabs [data-name].active {\n\t\tfont-weight: bold;\n\t}\n*/\n\nimport Element from '../element.js';\nimport Router from '../router.js';\n\nexport default Element.register ('r-tabs',\n{\n\t/*\n\t**\tContainer element for tab content.\n\t*/\n\tcontainer: null,\n\n\t/**\n\t**\tElement events.\n\t*/\n\t'event click [data-name]': function (evt)\n\t{\n\t\tevt.continuePropagation = true;\n\n\t\tif (this.dataset.baseRoute)\n\t\t{\n\t\t\tlocation = \"#\" + Router.realLocation(this.dataset.baseRoute.replace('@', evt.source.dataset.name));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectTab (evt.source.dataset.name);\n\t},\n\n\t/**\n\t**\tInitializes the Tabs element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis._routeHandler = (evt, args) =>\n\t\t{\n\t\t\tif (Router.location != '')\n\t\t\t{\n\t\t\t\tthis.querySelectorAll(\"[href]\").forEach(link =>\n\t\t\t\t{\n\t\t\t\t\tif (!link.href) return;\n\n\t\t\t\t\tif (Router.location.startsWith(link.href.substr(link.href.indexOf('#')+1)))\n\t\t\t\t\t\tlink.classList.add('active');\n\t\t\t\t\telse\n\t\t\t\t\t\tlink.classList.remove('active');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!args.route.changed)\n\t\t\t\treturn;\n\n\t\t\tthis.showTab (args.tabName);\n\t\t};\n\t},\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\tready: function()\n\t{\n\t\tif (\"container\" in this.dataset)\n\t\t{\n\t\t\tif (this.dataset.container == ':previousElement')\n\t\t\t\tthis.container = this.previousElementSibling;\n\t\t\telse if (this.dataset.container == ':nextElement')\n\t\t\t\tthis.container = this.nextElementSibling;\n\t\t\telse if (this.dataset.container == ':none')\n\t\t\t\tthis.container = null;\n\t\t\telse\n\t\t\t\tthis.container = document.querySelector(this.dataset.container);\n\t\t}\n\t\telse\n\t\t\tthis.container = this.nextElementSibling;\n\n\t\tthis._hideTabsExcept(this.dataset.initial);\n\t},\n\n\t/**\n\t**\tAdds a handler to Router if the data-base-route attribute was set.\n\t*/\n\tonConnected: function()\n\t{\n\t\tif (this.dataset.baseRoute)\n\t\t\tRouter.addRoute (this.dataset.baseRoute.replace('@', ':tabName'), this._routeHandler);\n\t},\n\n\t/**\n\t**\tRemoves a handler previously added to Router if the data-base-route attribute was set.\n\t*/\n\tonDisconnected: function()\n\t{\n\t\tif (this.dataset.baseRoute)\n\t\t\tRouter.removeRoute(this.dataset.baseRoute.replace('@', ':tabName'), this._routeHandler);\n\t},\n\n\t/**\n\t**\tHides all tabs except the one with the specified exceptName, if none specified then all tabs will be hidden (adds `.x-hidden` CSS class),\n\t**\tadditionally the respective link item in the tab definition will have class `.active`.\n\t*/\n\t_hideTabsExcept: function (exceptName)\n\t{\n\t\tif (!exceptName) exceptName = '';\n\n\t\tif (this.container != null)\n\t\t{\n\t\t\tthis.container.querySelectorAll(':scope > [data-name]').forEach(i =>\n\t\t\t{\n\t\t\t\tif (i.dataset.name == exceptName)\n\t\t\t\t{\n\t\t\t\t\ti.classList.remove('x-hidden');\n\t\t\t\t\tthis.dispatch('tabShown', { name: i.dataset.name, el: i });\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ti.classList.add('x-hidden');\n\t\t\t\t\tthis.dispatch('tabHidden', { name: i.dataset.name, el: i });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.querySelectorAll(\"[data-name]\").forEach(link =>\n\t\t{\n\t\t\tif (link.dataset.name == exceptName)\n\t\t\t\tlink.classList.add('active');\n\t\t\telse\n\t\t\t\tlink.classList.remove('active');\n\t\t});\n\n\t\tthis.dispatch('tabChanged', { name: exceptName });\n\t},\n\n\t/**\n\t**\tShows the tab with the specified name, ignores `data-base-route` and current route as well.\n\t*/\n\tshowTab: function (name)\n\t{\n\t\treturn this._hideTabsExcept (name);\n\t},\n\n\t/**\n\t**\tShows a tab given its name. The route will be changed automatically if `data-base-route` is enabled.\n\t*/\n\tselectTab: function (name)\n\t{\n\t\tif (this.dataset.baseRoute)\n\t\t{\n\t\t\tconst hash = \"#\" + Router.realLocation(this.dataset.baseRoute.replace('@', name));\n\n\t\t\tif (location.hash != hash)\n\t\t\t{\n\t\t\t\tlocation = hash;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.showTab (name);\n\t}\n});\n","/*\n**\telems/r-form\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n<r-form data-form-action=\"api-function-name\" [data-strict=\"true|false\"] [data-errors-at=\"\"] [data-method=\"post\"]>\n\t<input type=\"text\" data-field=\"username\"/>\n</r-form>\n\nr-form .message.x-hidden {\n    display: none;\n}\n\nr-form span.field-error {\n    display: block;\n    color: red;\n}\n*/\n\nimport { Template } from 'rinn';\nimport Element from '../element.js';\nimport Api from '../api.js';\n\nexport default Element.register ('r-form',\n{\n\t/**\n\t**\tElement events.\n\t*/\n\tevents:\n\t{\n\t\t'change [data-field]': '_fieldChanged',\n\n\t\t'click input[type=reset]': 'reset',\n\t\t'click .reset': 'reset',\n\n\t\t'click input[type=submit]': 'submit',\n\t\t'click button[type=submit]': 'submit',\n\t\t'click .submit': 'submit',\n\t\t'submit form': 'submit'\n\t},\n\n\t/*\n\t**\tInitial form model.\n\t*/\n\tmodel: { },\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\tready: function()\n\t{\n\t\tlet formElement = document.createElement('form');\n\t\tformElement.append(...this.childNodes);\n\t\tthis.append(formElement);\n\n\t\tlet def = { };\n\t\tlet names = this.model.get();\n\n\t\tthis.querySelectorAll('[data-field]').forEach((i) =>\n\t\t{\n\t\t\ti.name = i.dataset.field;\n\t\t\tnames[i.name] = i.type;\n\n\t\t\tlet val = i.dataset.default;\n\t\t\tif (val == undefined)\n\t\t\t{\n\t\t\t\tswitch (i.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'radio':\n\t\t\t\t\t\tif (!i.checked) return;\n\t\t\t\t\t\tval = i.value;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'checkbox':\n\t\t\t\t\t\tval = i.checked ? '1' : '0';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'field':\n\t\t\t\t\t\tval = i.getValue();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'file':\n\t\t\t\t\t\tval = '';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tval = '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdef[i.dataset.field] = val;\n\t\t});\n\n\t\tfor (let name in names)\n\t\t{\n\t\t\tif (name in def)\n\t\t\t\tnames[name] = def[name];\n\t\t\telse\n\t\t\t\tnames[name] = '';\n\t\t}\n\n\t\tdef = names;\n\n\t\tthis.model.defaults = def;\n\t\tthis.model.reset();\n\n\t\tthis.clearMarkers();\n\t},\n\n\t/*\n\t**\tTransforms an string returned by the server to a local representation.\n\t*/\n\tfilterString: function (str, r)\n\t{\n\t\tif (!str || !('messages' in global))\n\t\t\treturn str;\n\n\t\tif (str.startsWith('@messages.'))\n\t\t{\n\t\t\tif (str.substr(10) in global.messages)\n\t\t\t\tstr = Template.eval(global.messages[str.substr(10)], r);\n\t\t}\n\n\t\treturn str;\n\t},\n\n\t_change: function(elem)\n\t{\n\t\tif ('createEvent' in document)\n\t\t{\n\t\t\tlet evt = document.createEvent('HTMLEvents');\n\t\t\tevt.initEvent('change', false, true);\n\t\t\telem.dispatchEvent(evt);\n\t\t}\n\t\telse\n\t\t\telem.fireEvent('onchange');\n\t},\n\n\t_setField: function (f, value, silent)\n\t{\n\t\tif (!f) return;\n\n\t\tfor (f of this.querySelectorAll('[data-field=\"'+f+'\"]'))\n\t\t{\n\t\t\tswitch (f.type || f.tagName.toLowerCase())\n\t\t\t{\n\t\t\t\tcase 'select':\n\t\t\t\t\tf.val = f.dataset.value = f.multiple ? (value ? value.split(',') : value) : value;\n\t\t\t\t\tf.value = f.val = f.dataset.value;\n\n\t\t\t\t\tif (silent !== true) this._change(f);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tf.checked = parseInt(value) ? true : false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\tf.checked = value == f.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'field':\n\t\t\t\t\tf.val = f.dataset.value = value;\n\t\t\t\t\tf.setValue(value);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'file':\n\t\t\t\t\tif ((value instanceof File) || (value instanceof Blob))\n\t\t\t\t\t{\n\t\t\t\t\t\tf.val = value;\n\t\t\t\t\t\tf.dataset.value = value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (value instanceof FileList)\n\t\t\t\t\t{\n\t\t\t\t\t\tf.val = value;\n\t\t\t\t\t\tf.dataset.value = value;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tf.val = f.dataset.value = '';\n\t\t\t\t\t\tf.value = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tf.val = f.dataset.value = value;\n\t\t\t\t\tf.value = value;\n\n\t\t\t\t\tif (silent !== true) this._change(f);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\n\t_getField: function (f, _value=null, fromFileFields=false)\n\t{\n\t\tif (!f) return null;\n\n\t\tif (typeof(f) != 'string')\n\t\t{\n\t\t\tlet value = f.value == null ? f.val : f.value;\n\t\t\tif (value === null) value = _value;\n\n\t\t\tswitch (f.type || f.tagName.toLowerCase())\n\t\t\t{\n\t\t\t\tcase 'select':\n\t\t\t\t\t_value = f.multiple ? (value ? value.join(',') : value) : value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\t_value = f.checked ? '1' : '0';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\tif (f.checked) _value = f.value;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'field':\n\t\t\t\t\t_value = f.getValue();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'file':\n\t\t\t\t\t_value = fromFileFields ? (f.files && f.files.length ? (f.multiple ? f.files : f.files[0]) : null) : f.val;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_value = value;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn _value === null ? '' : _value;\n\t\t}\n\n\t\t_value = null;\n\n\t\tfor (f of this.querySelectorAll('[data-field=\"'+f+'\"]'))\n\t\t\t_value = this._getField(f, _value);\n\n\t\treturn _value === null ? '' : _value;\n\t},\n\n\tgetField: function (name)\n\t{\n\t\treturn this._getField(name);\n\t},\n\n\tclearMarkers: function ()\n\t{\n\t\tthis.classList.remove('busy');\n\n\t\tthis.querySelectorAll('.message').forEach(i => i.classList.add('x-hidden') );\n\t\tthis.querySelectorAll('span.field-error').forEach(i => i.remove());\n\n\t\tthis.querySelectorAll('.field-error').forEach(i => { i.classList.remove('field-error'); i.classList.remove('is-invalid'); });\n\t\tthis.querySelectorAll('.field-passed').forEach(i => i.classList.remove('field-passed'));\n\t},\n\n\t_fieldChanged: function (evt)\n\t{\n\t\tlet f = evt.source;\n\n\t\tif (f.type == 'file')\n\t\t\tthis.model.set (f.dataset.field, this._getField(f, null, true), true);\n\t\telse\n\t\t\tthis.model.set (f.dataset.field, this._getField(f));\n\n\t\tevt.continuePropagation = true;\n\t},\n\n\tonModelPropertyChanged: function (evt, args)\n\t{\n\t\tthis._setField (args.name, args.value);\n\t},\n\n\t_onSuccess: function(r)\n\t{\n\t\tthis.classList.remove('busy');\n\t\tlet tmp;\n\n\t\tthis.dispatch ('formSuccess', r);\n\n\t\tif (r.message && (tmp = this.querySelector('.message.success')) != null)\n\t\t{\n\t\t\ttmp.innerHTML = this.filterString(r.message, r).replace(/\\n/g, '<br/>');\n\t\t\ttmp.classList.remove('x-hidden');\n\t\t\ttmp.onanimationend = () => tmp.classList.add('x-hidden');\n\t\t}\n\t},\n\n\t_onFailure: function(r)\n\t{\n\t\tthis.classList.remove('busy');\n\t\tlet tmp;\n\n\t\tthis.dispatch ('formError', r);\n\n\t\tif (r.fields)\n\t\t{\n\t\t\tfor (let i in r.fields)\n\t\t\t{\n\t\t\t\tlet f = this.querySelector('[data-field-container=\"'+i+'\"]');\n\t\t\t\tif (!f)\n\t\t\t\t{\n\t\t\t\t\tf = this.querySelector('[data-field=\"'+i+'\"]');\n\t\t\t\t\tif (!f) continue;\n\t\t\t\t}\n\n\t\t\t\tlet tmp = document.createElement('span');\n\t\t\t\ttmp.classList.add('field-error');\n\t\t\t\ttmp.innerHTML = this.filterString(r.fields[i], r).replace(/\\n/g, '<br/>');\n\n\t\t\t\tf.classList.add('field-error');\n\t\t\t\tf.classList.add('is-invalid');\n\n\t\t\t\tif (this.dataset.errorsAt == 'bottom')\n\t\t\t\t\tf.parentElement.append(tmp);\n\t\t\t\telse if (this.dataset.errorsAt == 'top')\n\t\t\t\t\tf.parentElement.prepend(tmp);\n\t\t\t\telse\n\t\t\t\t\tf.parentElement.insertBefore(tmp, f.nextElementSibling);\n\n\t\t\t\tsetTimeout((function (tmp) { return function() { tmp.classList.add('active'); } })(tmp), 25);\n\t\t\t}\n\n\t\t\tif (r.error && (tmp = this.querySelector('.message.error')) != null)\n\t\t\t{\n\t\t\t\ttmp.innerHTML = this.filterString(r.error, r).replace(/\\n/g, '<br/>');\n\t\t\t\ttmp.classList.remove('x-hidden');\n\t\t\t\ttmp.onanimationend = () => tmp.classList.add('x-hidden');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif ((tmp = this.querySelector('.message.error')) != null)\n\t\t\t{\n\t\t\t\ttmp.innerHTML = this.filterString(r.error, r).replace(/\\n/g, '<br/>') || ('Error: ' + r.response);\n\t\t\t\ttmp.classList.remove('x-hidden');\n\t\t\t\ttmp.onanimationend = () => tmp.classList.add('x-hidden');\n\t\t\t}\n\t\t}\n\t},\n\n\treset: function (nsilent)\n\t{\n\t\tthis.model.reset (nsilent);\n\t\tthis.clearMarkers();\n\n\t\tif (nsilent === false)\n\t\t{\n\t\t\tfor (var i in this.model.data)\n\t\t\t\tthis._setField (i, this.model.data[i], true);\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tsubmit: function ()\n\t{\n\t\tif (this.classList.contains('busy'))\n\t\t\treturn;\n\n\t\tlet data = { };\n\n\t\tif (this.dataset.strict == 'false')\n\t\t\tObject.assign(data, this.model.get());\n\n\t\tlet list = { };\n\t\tthis.querySelectorAll('[data-field]').forEach(e => list[e.dataset.field] = true);\n\t\tObject.keys(list).forEach(f => data[f] = this._getField(f));\n\n\t\tthis.model.set(data);\n\n\t\tlet f = this.dataset.formAction || this.formAction;\n\t\tif (!f) return;\n\n\t\tthis.clearMarkers();\n\n\t\tthis.classList.add('busy');\n\n\t\tif (typeof(f) != 'function')\n\t\t{\n\t\t\tdata.f = f;\n\t\t\tApi.apiCall(data, (r) => this[r.response == 200 ? '_onSuccess' : '_onFailure'](r), (r) => this._onFailure({ error: 'Unable to execute request.' }), this.dataset.method ?? 'POST');\n\t\t}\n\t\telse\n\t\t\tf(data, (r) => this[r.response == 200 ? '_onSuccess' : '_onFailure'](r));\n\t}\n});\n","/*\n**\telems/r-panel\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-panel data-route=\"name\">\n\t</r-panel>\n\n\tr-panel {\n\t\tdisplay: block;\n\t}\n\n\tr-panel:not(.active) {\n\t\tdisplay: none;\n\t}\n\n*/\n\nimport Element from '../element.js';\nimport Router from '../router.js';\n\nexport default Element.register ('r-panel',\n{\n\t/**\n\t**\tRoute object used by this element.\n\t*/\n\troute: null,\n\n\t/**\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis.style.display = '';\n\n\t\t// Executed then the panel route is activated.\n\t\tthis._onActivate = (evt, args) =>\n\t\t{\n\t\t\tif (!args.route.changed)\n\t\t\t\treturn;\n\n\t\t\tthis.show(true);\n\t\t};\n\n\t\t// Executed then the panel route is deactivated.\n\t\tthis._onDeactivate = (evt, args) =>\n\t\t{\n\t\t\tthis.hide();\n\t\t};\n\n\t\tthis.hide();\n\t},\n\n\t/**\n\t**\tAdds a handler to Router if the data-route attribute was set.\n\t*/\n\tonConnected: function()\n\t{\n\t\tif (this.dataset.route)\n\t\t{\n\t\t\tthis.route = Router.addRoute (this.dataset.route, this._onActivate, this._onDeactivate);\n\t\t\tthis.classList.remove('active');\n\t\t}\n\t\telse\n\t\t\tthis.classList.add('active');\n\t},\n\n\t/**\n\t**\tRemoves a handler previously added to Router if the data-route attribute was set.\n\t*/\n\tonDisconnected: function()\n\t{\n\t\tif (this.dataset.route)\n\t\t\tRouter.removeRoute(this.dataset.route, this._onActivate, this._onDeactivate);\n\t},\n\n\t/**\n\t**\tHides the panel by removing the `active` class from the element. Fires `panelHidden` event.\n\t*/\n\thide: function ()\n\t{\n\t\tthis.classList.remove('active');\n\t\tthis.dispatch('panelHidden', this.route ? this.route.args : { });\n\t},\n\n\t/**\n\t**\tShows the panel visible by adding `active` class to the element. If `silent` is true and `data-route` enabled, the current route\n\t**\twill not be updated. Fires `panelShown` event.\n\t*/\n\tshow: function (silent=false)\n\t{\n\t\tif (this.dataset.route && !silent)\n\t\t{\n\t\t\tlet hash = \"#\" + this.dataset.route;\n\n\t\t\tif (window.location.hash.substr(0, hash.length) != hash)\n\t\t\t{\n\t\t\t\twindow.location = hash;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.classList.add('active');\n\t\tthis.dispatch('panelShown', this.route ? this.route.args : { });\n\t}\n});\n","/*\n**\telems/r-list\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-list data-list=\"window.dataList1\" data-container=\".x-data\" data-wrap=\"true|false\">\n\n\t\t<template data-mode=\"static|dynamic\">\n\t\t</template>\n\n\t\t<div class=\"x-empty\">\n\t\t\tNothing to show.\n\t\t</div>\n\n\t\t<div class=\"x-data\">\n\t\t</div>\n\n\t</r-list>\n\n\tCSS:\n\t\t.x-hidden {\n\t\t\tdisplay: none;\n\t\t}\n\n\tModifiers:\n\t\t.x-empty-null\t\tVisible when the list is in undefined state (before first load).\n\t\t.x-empty\t\t\tVisible when there is no data in the list.\n\t\t.x-not-empty \t\tVisible when there is data in the list.\n\t\t.x-loading \t\t\tVisible when the list is loading.\n*/\n\nimport { Rinn, ModelList, Template } from 'rinn';\nimport Element from '../element.js';\n\n/*\n**\tConnects to a ModelList and renders its contents using a template. When using \"dynamic\" template, the contents can be other custom elements, and\n**\tthe model of each item can be accessed by using data-model=\":list-item\", which will cause the item model to be added to the element.\n**\n**\tAdditionally root attribute data-wrap can be set to 'true' to wrap the template contents inside a div with a data-iid representing the ID of the\n**\titem, this will cause any changes to items to affect only the specific item in question.\n*/\n\nexport default Element.register ('r-list',\n{\n\tlist: null,\n\n\tcontainer: null,\n\ttemplate: null,\n\tisEmpty: false,\n\tisDynamicTemplate: false,\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\tready: function()\n\t{\n\t\tthis.container = this.querySelector(this.dataset.container || '.x-data');\n\t\tif (!this.container)\n\t\t{\n\t\t\tthis.container = document.createElement('div');\n\t\t\tthis.container.className = 'x-data';\n\t\t\tthis.appendChild(this.container);\n\t\t}\n\n\t\tlet tmp = this.template_elem = this.querySelector('template');\n\t\tif (tmp)\n\t\t{\n\t\t\tif (tmp.dataset.mode != 'dynamic')\n\t\t\t{\n\t\t\t\tthis.template = Template.compile(tmp.innerHTML);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.template = () => tmp.innerHTML;\n\t\t\t\tthis.isDynamicTemplate = true;\n\t\t\t}\n\n\t\t\ttmp.remove();\n\t\t}\n\t\telse\n\t\t\tthis.template = () => '';\n\n\t\tthis.container.textContent = ' ';\n\n\t\tthis.setEmpty(null);\n\t\tthis.setLoading(null);\n\t},\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\trready: function()\n\t{\n\t\tlet list = this.getFieldByPath(this.dataset.list);\n\t\tif (!list)\n\t\t{\n\t\t\tconsole.error('List not found: ' + this.dataset.list);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setList (list);\n\t},\n\n\t/*\n\t**\tIndicates if the list is empty. Elements having x-empty, x-not-empty and x-empty-null will be updated.\n\t*/\n\tsetEmpty: function (value)\n\t{\n\t\tif (this.isEmpty === value)\n\t\t\treturn;\n\n\t\tif (value === true)\n\t\t{\n\t\t\tthis.querySelectorAll('.x-empty').forEach(i => i.classList.remove('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-not-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-empty-null').forEach(i => i.classList.add('x-hidden'));\n\t\t}\n\t\telse if (value === false)\n\t\t{\n\t\t\tthis.querySelectorAll('.x-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-not-empty').forEach(i => i.classList.remove('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-empty-null').forEach(i => i.classList.add('x-hidden'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.querySelectorAll('.x-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-not-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-empty-null').forEach(i => i.classList.remove('x-hidden'));\n\t\t}\n\n\t\tthis.isEmpty = value;\n\t},\n\n\t/*\n\t**\tIndicates if the list is loading. Elements having x-loading will be updated.\n\t*/\n\tsetLoading: function (value)\n\t{\n\t\tif (value === true)\n\t\t\tthis.querySelectorAll('.x-loading').forEach(i => i.classList.remove('x-hidden'));\n\t\telse\n\t\t\tthis.querySelectorAll('.x-loading').forEach(i => i.classList.add('x-hidden'));\n\t},\n\n\t/**\n\t**\tSets the list model-list of the element.\n\t*/\n\tsetList: function (list)\n\t{\n\t\tif (!list || !Rinn.isInstanceOf(list, ModelList) || this.list === list)\n\t\t\treturn;\n\n\t\tif (this.list != null)\n\t\t{\n\t\t\tif (this.list.dataSource)\n\t\t\t\tthis.list.dataSource.removeEventListener (this.eid+':*');\n\n\t\t\tif (this.list.dataList)\n\t\t\t\tthis.list.dataList.removeEventListener (this.eid+':*');\n\n\t\t\tthis.list.removeEventListener (this.eid+':*');\n\t\t}\n\n\t\tthis.list = list;\n\n\t\tif (this.list.dataSource)\n\t\t{\n\t\t\tthis.list.dataSource.addEventListener (this.eid+':listLoading', this.onLoading, this);\n\t\t\tthis.list.dataSource.addEventListener (this.eid+':listLoaded', this.onLoaded, this);\n\t\t}\n\n\t\tif (this.list.dataList)\n\t\t{\n\t\t\tthis.list.dataList.addEventListener (this.eid+':listLoading', this.onLoading, this);\n\t\t\tthis.list.dataList.addEventListener (this.eid+':listLoaded', this.onLoaded, this);\n\t\t}\n\n\t\tthis.list.addEventListener (this.eid+':itemsCleared', this.onItemsCleared, this);\n\t\tthis.list.addEventListener (this.eid+':itemsChanged', this.onItemsChanged, this);\n\t\tthis.list.addEventListener (this.eid+':itemRemoved', this.onItemRemoved, this);\n\t\tthis.list.addEventListener (this.eid+':itemChanged', this.onItemChanged, this);\n\t\tthis.list.addEventListener (this.eid+':itemAdded', this.onItemAdded, this);\n\t},\n\n\t/*\n\t**\tBuilds an item (inside a div) to be added to the container.\n\t*/\n\tbuildItem: function (iid, data, asHtml=false)\n\t{\n\t\tlet html = this.template(data.get());\n\t\tif (asHtml) return html;\n\n\t\tlet elem = document.createElement('div');\n\t\t\n\t\telem.dataset.iid = iid;\n\t\telem.innerHTML = html;\n\n\t\telem.querySelectorAll('[data-model=\":list-item\"]').forEach(i => {\n\t\t\ti.model = data;\n\t\t\ti.dataset.model = \"this.model\";\n\t\t});\n\n\t\tfor (let attr of this.template_elem.attributes)\n\t\t{\n\t\t\tif (attr.nodeName.startsWith('data-_') || attr.nodeName == 'data-mode')\n\t\t\t\tcontinue;\n\n\t\t\telem.setAttribute(attr.nodeName, attr.nodeValue);\n\t\t}\n\n\t\treturn elem;\n\t},\n\n\t/*\n\t**\tExecuted when the list is loading.\n\t*/\n\tonLoading: function()\n\t{\n\t\tthis.setLoading(true);\n\t},\n\n\t/*\n\t**\tExecuted when the list finished loading.\n\t*/\n\tonLoaded: function()\n\t{\n\t\tthis.setLoading(false);\n\t},\n\n\t/*\n\t**\tExecuted when the list is cleared.\n\t*/\n\tonItemsCleared: function()\n\t{\n\t\tthis.container._timeout = setTimeout(() => {\n\t\t\tthis.setEmpty(true);\n\t\t\tthis.container._timeout = null;\n\t\t\tthis.container.textContent = '';\n\t\t}, 300);\n\t},\n\n\t/*\n\t**\tExecuted when the items of the list changed.\n\t*/\n\tonItemsChanged: function()\n\t{\n\t\tif (this.list.length() == 0)\n\t\t\treturn;\n\n\t\tif (this.container._timeout)\n\t\t\tclearTimeout(this.container._timeout);\n\n\t\tthis.container._timeout = null;\n\t\tthis.container.textContent = '';\n\n\t\tlet i = 0;\n\n\t\tfor (let data of this.list.getData())\n\t\t{\n\t\t\tif (this.dataset.wrap != 'false')\n\t\t\t\tthis.container.append(this.buildItem(this.list.itemId[i++], data));\n\t\t\telse\n\t\t\t\tthis.container.innerHTML += this.buildItem(this.list.itemId[i++], data, true);\n\t\t}\n\n\t\tthis.setEmpty(i == 0);\n\t},\n\n\t/*\n\t**\tExecuted when an item is removed from the list.\n\t*/\n\tonItemRemoved: function(evt, args)\n\t{\n\t\tif (this.dataset.wrap == 'false')\n\t\t{\n\t\t\tthis.onItemsChanged();\n\t\t\treturn;\n\t\t}\n\n\t\tlet elem = this.container.querySelector('[data-iid=\"'+args.id+'\"]');\n\t\tif (!elem) return;\n\n\t\telem.remove();\n\t\tthis.setEmpty(this.list.length() == 0);\n\t},\n\n\t/*\n\t**\tExecuted when an item changes.\n\t*/\n\tonItemChanged: function(evt, args)\n\t{\n\t\tif (this.isDynamicTemplate) return;\n\n\t\tif (this.dataset.wrap == 'false')\n\t\t{\n\t\t\tthis.onItemsChanged();\n\t\t\treturn;\n\t\t}\n\n\t\tlet elem = this.container.querySelector('[data-iid=\"'+args.id+'\"]');\n\t\tif (!elem) return;\n\n\t\telem.innerHTML = this.template(args.item);\n\t},\n\n\t/*\n\t**\tExecuted when an item is added to the list.\n\t*/\n\tonItemAdded: function(evt, args)\n\t{\n\t\tif (args.position == 'head')\n\t\t{\n\t\t\tif (this.dataset.wrap != 'false')\n\t\t\t\tthis.container.prepend(this.buildItem(args.id, args.item));\n\t\t\telse\n\t\t\t\tthis.container.innerHTML = this.buildItem(args.id, args.item, true) + this.container.innerHTML;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.dataset.wrap != 'false')\n\t\t\t\tthis.container.append(this.buildItem(args.id, args.item));\n\t\t\telse\n\t\t\t\tthis.container.innerHTML += this.buildItem(args.id, args.item, true);\n\t\t}\n\n\t\tthis.setEmpty(false);\n\t},\n\n\t/**\n\t * \tForces re-rendering of the element.\n\t */\n\trefresh: function()\n\t{\n\t\tthis.onItemsChanged();\n\t}\n});\n","/*\n**\telems/r-item\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-item data-model=\"window.model1\">\n\t</r-item>\n*/\n\nimport Element from '../element.js';\n\nexport default Element.register ('r-item',\n{\n\t/**\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t},\n\n\t/**\n\t**\tExecuted when the children and root are ready.\n\t*/\n\trready: function()\n\t{\n\t\tlet model = this.getFieldByPath(this.dataset.model);\n\t\tif (!model) model = { };\n\n\t\tthis.setModel (model);\n\t}\n});\n","/*\n**\telems/r-paginator\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-paginator data-source=\"window.dataSource1\" data-page-size=\"25\">\n\t\t<span data-watch=\"count\">Showing [offsetStart] to [offsetEnd] out of [count]</span>\n\n\t\t<button data-action=\"firstPage\">First</button>\n\t\t<button data-action=\"prevPage\">&laquo;</button>\n\t\t<button data-action=\"nextPage\">&raquo;</button>\n\t\t<button data-action=\"lastPage\">Last</button>\n\t\t<button data-action=\"refresh\">Refresh</button>\n\n\t\t<input type=\"text\" data-property=\"pageSize\" />\n\t</r-paginator>\n*/\n\nimport { Rinn } from 'rinn';\nimport Element from '../element.js';\nimport DataSource from '../data-source.js';\n\n/*\n**\tConnects to a data source to provide pagination features.\n*/\n\nexport default Element.register ('r-paginator',\n{\n\tsource: null,\n\ttemplate: null,\n\n\t/**\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis.setModel({\n\t\t\toffsetStart: 0,\n\t\t\toffsetEnd: 0,\n\t\t\tcount: 0, offset: 0,\n\t\t\tcurrentPageSize: this.dataset.pageSize || 25,\n\t\t\tpageSize: this.dataset.pageSize || 25\n\t\t});\n\n\t\tthis.listen('propertyChanged.pageSize', (evt, args) =>\n\t\t{\n\t\t\tif (this.model.get('currentPageSize') == args.value)\n\t\t\t\treturn;\n\n\t\t\tthis.model.set('currentPageSize', args.value);\n\t\t\tthis.updateOffset('range');\n\t\t});\n\t},\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\trready: function()\n\t{\n\t\tlet source = this.getFieldByPath(this.dataset.source);\n\t\tif (!source)\n\t\t{\n\t\t\tconsole.error('data-source not found: ' + this.dataset.source);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setSource(source);\n\t},\n\n\t/**\n\t**\tSets the source model-list of the paginator.\n\t*/\n\tsetSource: function (source)\n\t{\n\t\tif (!source || !Rinn.isInstanceOf(source, DataSource) || this.source === source)\n\t\t\treturn;\n\n\t\tif (this.source != null)\n\t\t{\n\t\t\tthis.source.removeEventListener (this.eid+':*');\n\t\t\tthis.source.includeCount = false;\n\t\t}\n\n\t\tthis.source = source;\n\n\t\tthis.source.includeCount = true;\n\t\tthis.updateOffset();\n\n\t\tthis.source.addEventListener (this.eid+':requestPropertyChanged', this.onRequestPropertyChanged, this);\n\t\tthis.source.addEventListener (this.eid+':countChanged', this.onCountChanged, this);\n\t\tthis.source.addEventListener (this.eid+':listItemRemoved', this.onItemRemoved, this);\n\t\tthis.source.addEventListener (this.eid+':listItemAdded', this.onItemAdded, this);\n\n\t\tthis.source.setNamespace(this.eid);\n\t\tthis.source.request.update(true);\n\t\tthis.source.setNamespace(null);\n\t},\n\n\t/*\n\t**\tUpdates several offset related fields in the paginator model. Optionally refreshes the data source with the specified mode.\n\t*/\n\tupdateOffset: function(mode=null)\n\t{\n\t\tthis.model.set('offsetStart', this.model.get('count') != 0 ? this.model.get('offset') + 1 : 0);\n\t\tthis.model.set('offsetEnd', Math.min(this.model.get('count'), this.model.get('offsetStart') + this.model.getInt('pageSize') - 1));\n\t\tthis.model.update('count');\n\n\t\tlet _count = this.source.request.get('count');\n\t\tlet _offset = this.source.request.get('offset');\n\n\t\tthis.source.request.set('count', this.model.getInt('pageSize'));\n\t\tthis.source.request.set('offset', this.model.get('offset'));\n\n\t\tif (mode && (_count != this.source.request.get('count') || _offset != this.source.request.get('offset')))\n\t\t\tthis.source.refresh(mode);\n\t},\n\n\t/*\n\t**\tEvent handler invoked when a property of the source request changes. The property is copied to the local model.\n\t*/\n\tonRequestPropertyChanged: function(evt, args)\n\t{\n\t\tif (args.name == 'count' || args.name == 'offset')\n\t\t\treturn;\n\n\t\tthis.model.set(args.name, args.value);\n\t},\n\n\t/*\n\t**\tEvent handler invoked when a property of the model has changed. The property is copied to the data source request model.\n\t*/\n\tonModelPropertyChanged: function (evt, args)\n\t{\n\t\tlet ignored = [\n\t\t\t'offsetStart',\n\t\t\t'offsetEnd',\n\t\t\t'count',\n\t\t\t'offset',\n\t\t\t'currentPageSize',\n\t\t\t'pageSize'\n\t\t];\n\n\t\tif (ignored.indexOf(args.name) != -1)\n\t\t\treturn;\n\n\t\tif (this.source.request.get(args.name) == args.value)\n\t\t\treturn;\n\n\t\tthis.source.request.set(args.name, args.value);\n\t\tthis.source.refresh('filter');\n\t},\n\n\t/*\n\t**\tExecuted when the remote count changes.\n\t*/\n\tonCountChanged: function(evt, args)\n\t{\n\t\tthis.model.set('count', evt.source.count, false);\n\t\tthis.updateOffset();\n\t},\n\n\t/*\n\t**\tExecuted when an item is removed from the list.\n\t*/\n\tonItemRemoved: function(evt, args)\n\t{\n\t\tthis.model.set('count', this.model.getInt('count') - 1, false);\n\t\tthis.updateOffset();\n\t},\n\n\t/*\n\t**\tExecuted when an item is added to the list.\n\t*/\n\tonItemAdded: function(evt, args)\n\t{\n\t\tthis.model.set('count', this.model.getInt('count') + 1, false);\n\t\tthis.updateOffset();\n\t},\n\n\t/*\n\t**\tMoves to the previous page.\n\t*/\n\tprevPage: function()\n\t{\n\t\tif (this.model.get('offset') <= 0)\n\t\t\treturn;\n\n\t\tlet offs = this.model.get('offset') - this.model.getInt('pageSize');\n\t\tif (offs < 0) offs = 0;\n\n\t\tthis.model.set('offset', offs);\n\t\tthis.updateOffset('range');\n\t},\n\n\t/*\n\t**\tMoves to the next page.\n\t*/\n\tnextPage: function()\n\t{\n\t\tlet offs = this.model.get('offset') + this.model.getInt('pageSize');\n\t\tif (offs >= this.model.get('count')) return;\n\n\t\tthis.model.set('offset', offs);\n\t\tthis.updateOffset('range');\n\t},\n\n\t/*\n\t**\tMoves to the first page.\n\t*/\n\tfirstPage: function()\n\t{\n\t\tthis.model.set('offset', 0);\n\t\tthis.updateOffset('range');\n\t},\n\n\t/*\n\t**\tMoves to the last page.\n\t*/\n\tlastPage: function()\n\t{\n\t\tlet offs = this.model.get('count') - this.model.getInt('pageSize');\n\t\tif (offs < 0) offs = 0;\n\n\t\tthis.model.set('offset', offs);\n\t\tthis.updateOffset('range');\n\t},\n\n\t/*\n\t**\tRefreshes the data source.\n\t*/\n\trefresh: function()\n\t{\n\t\tthis.source.refresh('full');\n\t},\n\n\t/*\n\t**\tClears (set to empty) the specified fields from the data source's request parameters.\n\t*/\n\tclear: function(args)\n\t{\n\t\tfor (let i = 0; i < args.length; i++)\n\t\t\tthis.model.set(args[i], '');\n\t}\n});\n","/*\n**\telems/r-table\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-table data-source=\"window.dataSource1\">\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>A</th>\n\t\t\t\t\t<th>B</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\n\t\t\t<tbody class=\"x-data\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>[a]</td>\n\t\t\t\t\t<td>[b]</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</r-table>\n\n\tCSS:\n\t\t.x-hidden {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tth[data-sort] {\n\t\t\tpointer: cursor; text-decoration: underline;\n\t\t}\n\n\t\tth[data-sort][data-order=\"asc\"]:after {\n\t\t\tcontent: \"ASC\";\n\t\t}\n\n\t\tth[data-sort][data-order=\"desc\"]:after {\n\t\t\tcontent: \"DESC\";\n\t\t}\n\n\tModifiers:\n\t\t.x-empty\t\t\tAdd to elements that should be shown only when there is no data in the data source.\n\t\t.x-not-empty \t\tAdd to elements that should be shown only when there is data in the data source.\n\t\t[data-sort]\t\t\tAdded to th/td elements in thead, marks the column as sortable.\n*/\n\nimport { Rinn, Template } from 'rinn';\nimport Element from '../element.js';\nimport DataSource from '../data-source.js';\n\n/*\n**\tConnects to a DataSource and renders its contents as a table.\n*/\n\nexport default Element.register ('r-table',\n{\n\tsource: null,\n\ttemplate: null,\n\tcontainer: null,\n\tisEmpty: null,\n\n\t/**\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis.setModel({ });\n\t},\n\n\t/**\n\t**\tExecuted when the children of the element are ready.\n\t*/\n\tready: function()\n\t{\n\t\tthis.container = this.querySelector(this.dataset.container || 'tbody.x-data');\n\t\tif (!this.container) throw new Error ('r-table requires a container');\n\n\t\tif (this.container.dataset.mode != 'dynamic')\n\t\t\tthis.template = Template.compile(this.container.innerHTML);\n\t\telse\n\t\t\tthis.template = () => this.container.innerHTML;\n\n\t\tthis.temporalBody = document.createElement('tbody');\n\t\tthis.container.textContent = ' ';\n\n\t\tthis.setEmpty(true);\n\t},\n\n\t/**\n\t**\tExecuted when the children and root elements are ready.\n\t*/\n\trready: function()\n\t{\n\t\tlet source = this.getFieldByPath(this.dataset.source);\n\t\tif (!source)\n\t\t{\n\t\t\tconsole.error('data-source not found: ' + this.dataset.source);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setSource (source);\n\t},\n\n\t/*\n\t**\tIndicates if the table is empty. Elements having .x-not-empty will be hidden.\n\t*/\n\tsetEmpty: function (value)\n\t{\n\t\tif (this.isEmpty === value)\n\t\t\treturn;\n\n\t\tif (value)\n\t\t{\n\t\t\tthis.querySelectorAll('.x-empty').forEach(i => i.classList.remove('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-not-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.querySelectorAll('.x-empty').forEach(i => i.classList.add('x-hidden'));\n\t\t\tthis.querySelectorAll('.x-not-empty').forEach(i => i.classList.remove('x-hidden'));\n\t\t}\n\n\t\tthis.isEmpty = value;\n\t},\n\n\t/**\n\t**\tSets the data source of the element.\n\t*/\n\tsetSource: function (source)\n\t{\n\t\tif (!source || !Rinn.isInstanceOf(source, DataSource) || this.source === source)\n\t\t\treturn;\n\n\t\tif (this.source != null)\n\t\t\tthis.source.removeEventListener (this.eid+':*');\n\n\t\tthis.source = source;\n\n\t\tthis.source.addEventListener (this.eid+':requestPropertyChanged', this.onRequestPropertyChanged, this);\n\t\tthis.source.addEventListener (this.eid+':listItemsCleared', this.onItemsCleared, this);\n\t\tthis.source.addEventListener (this.eid+':listItemsChanged', this.onItemsChanged, this);\n\t\tthis.source.addEventListener (this.eid+':listItemRemoved', this.onItemRemoved, this);\n\t\tthis.source.addEventListener (this.eid+':listItemChanged', this.onItemChanged, this);\n\t\tthis.source.addEventListener (this.eid+':listItemAdded', this.onItemAdded, this);\n\n\t\tthis.source.setNamespace(this.eid);\n\t\tthis.source.request.update(true);\n\t\tthis.source.setNamespace(null);\n\t},\n\n\t/*\n\t**\tEvent handler invoked when a property of the source request changes. The property is copied to the local model.\n\t*/\n\tonRequestPropertyChanged: function(evt, args)\n\t{\n\t\tthis.model.set(args.name, args.value);\n\n\t\tif (args.name == 'sort')\n\t\t{\n\t\t\tthis.querySelectorAll('thead [data-sort]').forEach(i => i.dataset.order = '');\n\t\t}\n\t\telse if (args.name == 'order')\n\t\t{\n\t\t\tlet elem = this.querySelector('thead [data-sort=\"'+evt.source.get('sort')+'\"]');\n\t\t\tif (elem) elem.dataset.order = args.value;\n\t\t}\n\t},\n\n\t/*\n\t**\tEvent handler invoked when a property of the model has changed. The property is copied to the data source request model.\n\t*/\n\tonModelPropertyChanged: function (evt, args)\n\t{\n\t\tif (this.source.request.get(args.name) == args.value)\n\t\t\treturn;\n\n\t\tthis.source.request.set(args.name, args.value);\n\n\t\tlet ignored = [\n\t\t\t'count',\n\t\t\t'offset'\n\t\t];\n\n\t\tif (ignored.indexOf(args.name) != -1)\n\t\t\treturn;\n\n\t\tthis.source.refresh('filter');\n\t},\n\n\t/*\n\t**\tEvent handler invoked when a property of the model is removed.\n\t*/\n\tonModelPropertyRemoved: function (evt, args)\n\t{\n\t\tif (typeof(args.fields) == 'string')\n\t\t\tthis.source.request.remove(i);\n\t\telse\n\t\t\targs.fields.forEach(i => this.source.request.remove(i));\n\n\t\tthis.source.refresh('filter');\n\t},\n\n\t/*\n\t**\tBuilds an item to be added to the container.\n\t*/\n\tbuildItem: function (iid, data)\n\t{\n\t\tlet elem = this.temporalBody;\n\n\t\telem.innerHTML = this.template(data.get());\n\n\t\telem.querySelectorAll('[data-model=\":list-item\"]').forEach(i => {\n\t\t\ti.model = data;\n\t\t\ti.dataset.model = \"this.model\";\n\t\t});\n\n\t\telem = elem.firstElementChild;\n\t\telem.dataset.iid = iid;\n\n\t\treturn elem;\n\t},\n\n\t/*\n\t**\tExecuted when the list is cleared.\n\t*/\n\tonItemsCleared: function(evt, args)\n\t{\n\t\tthis.container._timeout = setTimeout(() => {\n\t\t\tthis.setEmpty(true);\n\t\t\tthis.container._timeout = null;\n\t\t\tthis.container.textContent = '';\n\t\t}, 300);\n\t},\n\n\t/*\n\t**\tExecuted when the items of the list changed.\n\t*/\n\tonItemsChanged: function(evt, args)\n\t{\n\t\tif (this.source.list.length() == 0)\n\t\t\treturn;\n\n\t\tif (this.container._timeout)\n\t\t\tclearTimeout(this.container._timeout);\n\n\t\tthis.container._timeout = null;\n\t\tthis.container.textContent = '';\n\n\t\tlet i = 0;\n\n\t\tfor (let data of this.source.list.getData())\n\t\t\tthis.container.append(this.buildItem(this.source.list.itemId[i++], data));\n\n\t\tthis.setEmpty(i == 0);\n\t},\n\n\t/*\n\t**\tExecuted when an item is removed from the list.\n\t*/\n\tonItemRemoved: function(evt, args)\n\t{\n\t\tlet elem = this.container.querySelector('[data-iid=\"'+args.id+'\"]');\n\t\tif (!elem) return;\n\n\t\telem.remove();\n\t\tthis.setEmpty(this.source.list.length() == 0);\n\t},\n\n\t/*\n\t**\tExecuted when an item changes.\n\t*/\n\tonItemChanged: function(evt, args)\n\t{\n\t\tlet elem = this.container.querySelector('[data-iid=\"'+args.id+'\"]');\n\t\tif (!elem) return;\n\n\t\tlet _elem = this.buildItem(args.id, args.item);\n\t\tthis.container.replaceChild(_elem, elem);\n\t},\n\n\t/*\n\t**\tExecuted when an item is added to the list.\n\t*/\n\tonItemAdded: function(evt, args)\n\t{\n\t\tif (args.position == 'head')\n\t\t\tthis.container.prepend(this.buildItem(args.id, args.item));\n\t\telse\n\t\t\tthis.container.append(this.buildItem(args.id, args.item));\n\n\t\tthis.setEmpty(false);\n\t},\n\n\t/*\n\t**\tHandles clicks to data-sort elements.\n\t*/\n\t\"event click thead [data-sort]\": function(evt, args)\n\t{\n\t\tif (this.source.request.get('sort') == evt.source.dataset.sort)\n\t\t{\n\t\t\tthis.source.request.set('order', this.source.request.get('order') == 'asc' ? 'desc' : 'asc');\n\t\t\tthis.source.refresh('order');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.source.request.set('sort', evt.source.dataset.sort);\n\t\t\tthis.source.request.set('order', 'asc', true);\n\t\t\tthis.source.refresh('order');\n\t\t}\n\t},\n\n\t/*\n\t**\tRefreshes the data source.\n\t*/\n\trefresh: function()\n\t{\n\t\tthis.source.refresh('full');\n\t},\n\n\t/*\n\t**\tClears (set to empty) the specified fields from the data source's request parameters.\n\t*/\n\tclear: function(args)\n\t{\n\t\tfor (let i = 0; i < args.length; i++)\n\t\t\tthis.model.set(args[i], '');\n\t}\n});\n","/*\n**\telems/r-select\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-select data-list=\"window.dataList1\" data-blank=\"\"></r-select>\n*/\n\nimport { Rinn, ModelList } from 'rinn';\nimport Element from '../element.js';\n\n/*\n**\tConnects to a ModelList and renders its contents as a <select> element.\n*/\n\nexport default Element.register ('r-select',\n{\n\tlist: null,\n\tcontainer: null,\n\n\tvalue: '',\n\n\t/**\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis.container = document.createElement('select');\n\t\tthis.parentElement.insertBefore(this.container, this);\n\n\t\tlet list = [];\n\n\t\tfor (let attr of this.attributes)\n\t\t{\n\t\t\tif (attr.nodeName.startsWith('data-_') || attr.nodeName == 'data-list' || attr.nodeName == 'data-blank')\n\t\t\t\tcontinue;\n\n\t\t\tthis.container.setAttribute(attr.nodeName, attr.nodeValue);\n\t\t\tlist.push(attr.nodeName);\n\t\t}\n\n\t\tlist.forEach(i => this.removeAttribute(i));\n\n\t\tthis.textContent = ' ';\n\t\tthis.style.display = 'none';\n\t},\n\n\t/**\n\t**\tExecuted when the children and parent of the element are ready.\n\t*/\n\trready: function()\n\t{\n\t\tlet list = this.getFieldByPath(this.dataset.list);\n\t\tif (!list)\n\t\t{\n\t\t\tconsole.error('List not found: ' + this.dataset.list);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setList(list);\n\n\t\tif (this.parentElement.lastElementChild !== this)\n\t\t\tthis.parentElement.append(this);\n\t},\n\n\t/**\n\t**\tSets the list model-list of the element.\n\t*/\n\tsetList: function (list)\n\t{\n\t\tif (!list || !Rinn.isInstanceOf(list, ModelList) || this.list === list)\n\t\t\treturn;\n\n\t\tif (this.list != null)\n\t\t\tthis.list.removeEventListener (this.eid+':*');\n\n\t\tthis.list = list;\n\n\t\tif (this.list.dataSource)\n\t\t\tthis.list.dataSource.includeEnum = true;\n\n\t\tthis.list.addEventListener (this.eid+':itemsCleared', this.onItemsCleared, this);\n\t\tthis.list.addEventListener (this.eid+':itemsChanged', this.onItemsChanged, this);\n\t\tthis.list.addEventListener (this.eid+':itemRemoved', this.onItemsChanged, this);\n\t\tthis.list.addEventListener (this.eid+':itemChanged', this.onItemsChanged, this);\n\t\tthis.list.addEventListener (this.eid+':itemAdded', this.onItemsChanged, this);\n\n\t\tthis.onItemsChanged();\n\t},\n\n\t/*\n\t**\tExecuted when the list is cleared.\n\t*/\n\tonItemsCleared: function(evt, args)\n\t{\n\t\tthis.container.textContent = '';\n\t},\n\n\t/*\n\t**\tExecuted when the items of the list changed.\n\t*/\n\tonItemsChanged: function(evt, args)\n\t{\n\t\tif (this.list.length() == 0)\n\t\t\treturn;\n\n\t\tlet list = this.list.getData();\n\t\tlet value, label, s = '';\n\n\t\tif (list[0].has('value')) value = 'value';\n\t\telse if (list[0].has('id')) value = 'id';\n\n\t\tif (list[0].has('label')) label = 'label';\n\t\telse if (list[0].has('name')) label = 'name';\n\n\t\tif ('blank' in this.dataset)\n\t\t\ts += '<option value=\"\">'+this.dataset.blank+'</option>';\n\n\t\tif (list[0].has('group'))\n\t\t{\n\t\t\tlet groups = { };\n\t\t\tlist.forEach(i => groups[i.get('group')] = null);\n\n\t\t\tfor (let i in groups)\n\t\t\t\tgroups[i] = { name: i, list: [] };\n\n\t\t\tlist.forEach(i => groups[i.get('group')].list.push(i));\n\n\t\t\tgroups = Object.values(groups);\n\t\t\tgroups.forEach(g => {\n\t\t\t\ts += '<optgroup label=\"'+g.name+'\">';\n\t\t\t\tg.list.forEach(i => s += '<option value=\"'+i.get(value)+'\">'+i.get(label)+'</option>');\n\t\t\t\ts += '</optgroup>';\n\t\t\t});\n\t\t}\n\t\telse\n\t\t\tlist.forEach(i => s += '<option value=\"'+i.get(value)+'\">'+i.get(label)+'</option>');\n\n\t\tthis.container.innerHTML = s;\n\t\tthis.container.value = this.container.dataset.value;\n\t},\n\n\t/**\n\t * \tForces re-rendering of the element.\n\t */\n\trefresh: function()\n\t{\n\t\tthis.onItemsChanged();\n\t}\n});\n","/*\n**\triza/utils\n**\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nconst Utils =\n{\n\t/**\n\t**\tForces the browser to show a download dialog.\n\t*/\n\tshowDownload: function (filename, dataUrl)\n\t{\n\t\tvar link = document.createElement(\"a\");\n\t\tlink.href = dataUrl;\n\n\t\tlink.style.display = 'none';\n\t\tlink.download = filename;\n\t\tlink.target = \"_blank\";\n\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t},\n\n\t/**\n\t**\tForces the browser to show a file selection dialog.\n\t*/\n\tshowFilePicker: function (allowMultiple, accept, callback)\n\t{\n\t\tvar input = document.createElement(\"input\");\n\n\t\tinput.type = \"file\";\n\t\tinput.accept = accept;\n\t\tinput.style.display = 'none';\n\t\tinput.multiple = allowMultiple;\n\n\t\tdocument.body.appendChild(input);\n\n\t\tinput.onchange = function () {\n\t\t\tcallback(input.files);\n\t\t};\n\n\t\tdocument.body.onfocus = function ()\n\t\t{\n\t\t\tdocument.body.onfocus = null;\n\t\t\tdocument.body.removeChild(input);\n\t\t};\n\n\t\tinput.click();\n\t},\n\n\t/**\n\t**\tLoads a URL using FileReader and returns as a dataURL.\n\t*/\n\tloadAsDataUrl: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result, null);\n\t\t};\n\n\t\treader.onerror = function(e) {\n\t\t\tcallback (null, e);\n\t\t};\n\n\t\treader.readAsDataURL(file);\n\t},\n\n\t/**\n\t**\tLoads a URL using FileReader and returns as text.\n\t*/\n\tloadAsText: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result);\n\t\t};\n\n\t\treader.readAsText(file);\n\t},\n\n\t/**\n\t**\tLoads a URL using FileReader and returns as an array buffer.\n\t*/\n\tloadAsArrayBuffer: function (file, callback)\n\t{\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\t\t\tcallback (e.target.result);\n\t\t};\n\n\t\treader.readAsArrayBuffer(file);\n\t},\n\n\t/**\n\t**\tLoads an array of URLs using FileReader and returns them as data url.\n\t*/\n\tloadAllAsDataUrl: function (fileList, callback)\n\t{\n\t\tvar result = [];\n\n\t\tif (!fileList || !fileList.length)\n\t\t{\n\t\t\tcallback(result);\n\t\t\treturn;\n\t\t}\n\n\t\tvar loadNext = function (i)\n\t\t{\n\t\t\tif (i == fileList.length)\n\t\t\t{\n\t\t\t\tcallback(result);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tUtils.loadAsDataUrl (fileList[i], function(url, err) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tresult.push({ name: fileList[i].name, size: fileList[i].size, url: url });\n\t\t\t\t}\n\t\t\t\tloadNext(i+1);\n\t\t\t});\n\t\t};\n\n\t\tloadNext(0);\n\t},\n\n\t/*\n\t**\tLoads a URL as an image.\n\t*/\n\tloadImageFromUrl: function (url, callback)\n\t{\n\t\tlet image = new Image();\n\t\timage.onload = () => callback(image);\n\t\timage.onerror = () => callback(null);\n\t\timage.src = url;\n\t}\n};\n\nexport default Utils;\n","/*\n**\telems/r-image-cropper\n**\n**\tCopyright (c) 2019-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/*\n\t<r-image-cropper>\n\t</r-image-cropper>\n*/\n\nimport Element from '../element.js';\nimport Utils from '../utils.js';\n\nexport default Element.register ('r-image-cropper',\n{\n\t/*\n\t**\tDefault aspect ratio.\n\t*/\n\taspectRatio: 1,\n\n\t/*\n\t**\tCurrent image scale.\n\t*/\n\timageScale0: 0, imageScale: 1,\n\n\t/*\n\t**\tImage translation offsets.\n\t*/\n\timageOffsX: 0, imageOffsY: 0,\n\n\t/*\n\t**\tPointer contexts.\n\t*/\n\tpointerA: null, pointerB: null,\n\n\t/*\n\t**\tClient bounding box.\n\t*/\n\tbounds: null,\n\n\t/*\n\t**\tInitializes the element.\n\t*/\n\tinit: function()\n\t{\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.appendChild(this.canvas);\n\n\t\tthis.g = this.canvas.getContext('2d');\n\n\t\tthis.pointerA = { id: null, active: false, sx: 0, sy: 0, cx: 0, cy: 0, ix: 0, iy: 0 };\n\t\tthis.pointerB = { id: null, active: false, sx: 0, sy: 0, cx: 0, cy: 0, ix: 0, iy: 0 };\n\n\t\tthis.log = document.createElement('div');\n\t\tthis.appendChild(this.log);\n\t},\n\n\t/*\n\t**\tSets the image for the cropper from an image URL.\n\t*/\n\tsetImageUrl: function(url)\n\t{\n\t\tUtils.loadImageFromUrl(url, (image) => {\n\t\t\tthis.setImage(image);\n\t\t});\n\t},\n\n\t/*\n\t**\tSets the image for the cropper from an HTML File object.\n\t*/\n\tsetImageFile: function(file)\n\t{\n\t\tUtils.loadAsDataUrl(file, (url) => {\n\t\t\tUtils.loadImageFromUrl(url, (image) => {\n\t\t\t\tthis.setImage(image);\n\t\t\t});\n\t\t});\n\t},\n\n\t/*\n\t**\tSets the cropper image from an HTML Image element.\n\t*/\n\tsetImage: function(image)\n\t{\n\t\tthis.image = image;\n\n\t\tthis.reset();\n\n\t\tthis.imageScale = Math.max(this.canvas.width / this.image.width, this.canvas.height / this.image.height);\n\n\t\tthis.imageOffsX = (this.canvas.width - this.imageScale*this.image.width)*0.5;\n\t\tthis.imageOffsY = (this.canvas.height - this.imageScale*this.image.height)*0.5;\n\n\t\tthis.render();\n\t},\n\n\t/*\n\t**\tReturns the blob and URL representing the current canvas state.\n\t*/\n\tgetBlobAndUrl: function(callback, type='image/png', quality=0.9)\n\t{\n\t\tthis.canvas.toBlob((blob) => {\n\t\t\tcallback(blob, URL.createObjectURL(blob));\n\t\t},\n\t\ttype, quality);\n\t},\n\n\t/*\n\t**\tAuto-resizes the canvas to ensure the aspect ratio is maintained.\n\t*/\n\treset: function()\n\t{\n\t\tthis.bounds = this.getBoundingClientRect();\n\n\t\tthis.canvas.width = this.bounds.width;\n\t\tthis.canvas.height = this.bounds.width/this.aspectRatio;\n\t},\n\n\t/*\n\t**\tAuto-resizes the canvas to ensure the aspect ratio is maintained and renders the image.\n\t*/\n\trender: function()\n\t{\n\t\tthis.canvas.width = this.canvas.width;\n\n\t\tthis.g.fillStyle = '#000';\n\t\tthis.g.beginPath();\n\t\tthis.g.rect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.g.fill();\n\n\t\tthis.g.translate(this.imageOffsX, this.imageOffsY);\n\t\tthis.g.scale(this.imageScale, this.imageScale);\n\t\tthis.g.drawImage(this.image, 0, 0);\n\t},\n\n\t/*\n\t**\tTranslates the image by the given offsets.\n\t*/\n\ttranslateImage: function(offsX, offsY)\n\t{\n\t\tthis.imageOffsX += offsX;\n\t\tthis.imageOffsY += offsY;\n\n\t\tthis.render(true);\n\t},\n\n\t/*\n\t**\tHandle mouse events on the canvas.\n\t*/\n\t\"event mousemove canvas\": function(evt)\n\t{\n\t\tif (this.pointerA.active)\n\t\t{\n\t\t\tthis.pointerA.cx = evt.clientX;\n\t\t\tthis.pointerA.cy = evt.clientY;\n\n\t\t\tthis.translateImage(this.pointerA.cx - this.pointerA.sx, this.pointerA.cy - this.pointerA.sy);\n\n\t\t\tthis.pointerA.sx = this.pointerA.cx;\n\t\t\tthis.pointerA.sy = this.pointerA.cy;\n\t\t}\n\n\t\tthis.pointerA.ix = ((evt.clientX-this.bounds.left) - this.imageOffsX) / this.imageScale;\n\t\tthis.pointerA.iy = ((evt.clientY-this.bounds.top) - this.imageOffsY) / this.imageScale;\n\t},\n\n\t\"event mousedown canvas\": function(evt)\n\t{\n\t\tthis.pointerA.active = true;\n\t\tthis.pointerA.sx = evt.clientX;\n\t\tthis.pointerA.sy = evt.clientY;\n\t},\n\n\t\"event mouseup canvas\": function(evt)\n\t{\n\t\tthis.pointerA.active = false;\n\t},\n\n\t\"event wheel canvas\": function(evt)\n\t{\n\t\tif (evt.deltaY > 0)\n\t\t\tthis.imageScale -= 0.045;\n\t\telse\n\t\t\tthis.imageScale += 0.045;\n\n\t\tif (this.imageScale < 0.1) this.imageScale = 0.1;\n\n\t\tthis.imageOffsX += -this.pointerA.ix*this.imageScale + (evt.clientX-this.bounds.left) - this.imageOffsX;\n\t\tthis.imageOffsY += -this.pointerA.iy*this.imageScale + (evt.clientY-this.bounds.top) - this.imageOffsY;\n\n\t\tthis.render();\n\t},\n\n\t/*\n\t**\tHandle touch events on the canvas.\n\t*/\n\t\"event touchmove canvas\": function(evt)\n\t{\n\t\tfor (let i of evt.changedTouches)\n\t\t{\n\t\t\tif (this.pointerA.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerA.cx = i.clientX;\n\t\t\t\tthis.pointerA.cy = i.clientY;\n\t\t\t}\n\t\t\telse if (this.pointerB.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerB.cx = i.clientX;\n\t\t\t\tthis.pointerB.cy = i.clientY;\n\t\t\t}\n\t\t}\n\n\t\tif (this.pointerA.active && this.pointerB.active)\n\t\t{\n\t\t\tlet d0 = Math.sqrt(Math.pow(this.pointerA.sx-this.pointerB.sx, 2) + Math.pow(this.pointerA.sy-this.pointerB.sy, 2));\n\t\t\tlet d1 = Math.sqrt(Math.pow(this.pointerA.cx-this.pointerB.cx, 2) + Math.pow(this.pointerA.cy-this.pointerB.cy, 2));\n\n\t\t\tlet d = d1 - d0;\n\t\t\tthis.imageScale += (d/10)*0.025;\n\t\t\tif (this.imageScale < 0.1) this.imageScale = 0.1;\n\n\t\t\tthis.imageOffsX += -this.pointerA.ix*this.imageScale + (this.pointerA.cx-this.bounds.left) - this.imageOffsX;\n\t\t\tthis.imageOffsY += -this.pointerA.iy*this.imageScale + (this.pointerA.cy-this.bounds.top) - this.imageOffsY;\n\n\t\t\tthis.pointerA.sx = this.pointerA.cx;\n\t\t\tthis.pointerA.sy = this.pointerA.cy;\n\n\t\t\tthis.pointerB.sx = this.pointerB.cx;\n\t\t\tthis.pointerB.sy = this.pointerB.cy;\n\n\t\t\tthis.render();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet p = this.pointerA.active ? this.pointerA : (this.pointerB.active ? this.pointerB : null);\n\t\t\tif (!p) return;\n\n\t\t\tthis.translateImage(p.cx - p.sx, p.cy - p.sy);\n\n\t\t\tp.sx = p.cx;\n\t\t\tp.sy = p.cy;\n\t\t}\n\t},\n\n\t\"event touchstart canvas\": function(evt)\n\t{\n\t\tthis.imageScale0 = this.imageScale;\n\n\t\tfor (let i of evt.changedTouches)\n\t\t{\n\t\t\tif (this.pointerA.id === null)\n\t\t\t{\n\t\t\t\tthis.pointerA.id = i.identifier;\n\t\t\t\tthis.pointerA.active = true;\n\t\t\t\tthis.pointerA.sx = i.clientX;\n\t\t\t\tthis.pointerA.sy = i.clientY;\n\t\t\t\tthis.pointerA.ix = ((i.clientX-this.bounds.left) - this.imageOffsX) / this.imageScale;\n\t\t\t\tthis.pointerA.iy = ((i.clientY-this.bounds.top) - this.imageOffsY) / this.imageScale;\n\t\t\t}\n\t\t\telse if (this.pointerB.id === null)\n\t\t\t{\n\t\t\t\tthis.pointerB.id = i.identifier;\n\t\t\t\tthis.pointerB.active = true;\n\t\t\t\tthis.pointerB.sx = i.clientX;\n\t\t\t\tthis.pointerB.sy = i.clientY;\n\t\t\t\tthis.pointerB.ix = ((i.clientX-this.bounds.left) - this.imageOffsX) / this.imageScale;\n\t\t\t\tthis.pointerB.iy = ((i.clientY-this.bounds.top) - this.imageOffsY) / this.imageScale;\n\t\t\t}\n\t\t}\n\t},\n\n\t\"event touchend canvas\": function(evt)\n\t{\n\t\tfor (let i of evt.changedTouches)\n\t\t{\n\t\t\tif (this.pointerA.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerA.id = null;\n\t\t\t\tthis.pointerA.active = false;\n\t\t\t}\n\t\t\telse if (this.pointerB.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerB.id = null;\n\t\t\t\tthis.pointerB.active = false;\n\t\t\t}\n\t\t}\n\t},\n\n\t\"event touchcancel canvas\": function(evt)\n\t{\n\t\tfor (let i of evt.changedTouches)\n\t\t{\n\t\t\tif (this.pointerA.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerA.id = null;\n\t\t\t\tthis.pointerA.active = false;\n\t\t\t}\n\t\t\telse if (this.pointerB.id == i.identifier)\n\t\t\t{\n\t\t\t\tthis.pointerB.id = null;\n\t\t\t\tthis.pointerB.active = false;\n\t\t\t}\n\t\t}\n\t}\n});\n","/*\n**\triza/main\n**\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\n**\thttps://www.rsthn.com/\n**\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nimport _Router from './router.js'; export const Router = _Router;\nimport _Element from './element.js'; export const Element = _Element; export const CElement = _Element;\nimport _Api from './api.js'; export const Api = _Api;\nimport _DataSource from './data-source.js'; export const DataSource = _DataSource;\nimport _DataList from './data-list.js'; export const DataList = _DataList;\nimport _Easing from './easing.js'; export const Easing = _Easing;\nimport _Anim from './anim.js'; export const Anim = _Anim;\nimport _Elements from './elements.js'; export const Elements = _Elements;\nimport _Utils from './utils.js'; export const Utils = _Utils;\n\nimport * as _Rinn from 'rinn';\nexport const Rinn = _Rinn.Rinn;\nexport const Class = _Rinn.Class;\nexport const Event = _Rinn.Event;\nexport const EventDispatcher = _Rinn.EventDispatcher;\nexport const Model = _Rinn.Model;\nexport const ModelList = _Rinn.ModelList;\nexport const Schema = _Rinn.Schema;\nexport const Flattenable = _Rinn.Flattenable;\nexport const Collection = _Rinn.Collection;\nexport const Template = _Rinn.Template;\n","/*\r\n**\triza/elements\r\n**\r\n**\tCopyright (c) 2013-2021, RedStar Technologies, All rights reserved.\r\n**\thttps://www.rsthn.com/\r\n**\r\n**\tTHIS LIBRARY IS PROVIDED BY REDSTAR TECHNOLOGIES \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES,\r\n**\tINCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A \r\n**\tPARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL REDSTAR TECHNOLOGIES BE LIABLE FOR ANY\r\n**\tDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT \r\n**\tNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; \r\n**\tOR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, \r\n**\tSTRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE\r\n**\tUSE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n*/\r\n\r\nimport _Tabs from './elems/r-tabs.js';\r\nimport _Form from './elems/r-form.js';\r\nimport _Panel from './elems/r-panel.js';\r\nimport _List from './elems/r-list.js';\r\nimport _Item from './elems/r-item.js';\r\nimport _Paginator from './elems/r-paginator.js';\r\nimport _Table from './elems/r-table.js';\r\nimport _Select from './elems/r-select.js';\r\nimport _ImageCropper from './elems/r-image-cropper.js';\r\n\r\nexport default {\r\n\tTabs: _Tabs,\r\n\tForm: _Form,\r\n\tPanel: _Panel,\r\n\tList: _List,\r\n\tItem: _Item,\r\n\tPaginator: _Paginator,\r\n\tTable: _Table,\r\n\tSelect: _Select,\r\n\tImageCropper: _ImageCropper\r\n};\r\n"],"names":["$864a0b94480365d3$var$_Router","$5m6ff$EventDispatcher","extend","route","this","_super","EventDispatcher","__ctor","_compileRoute","value","params","replace","m","exec","push","routeRegex","addHandler","handler","unrouted","addEventListener","removeHandler","removeEventListener","matches","match","s_args","active","dispatchEvent","args","str","i","length","changed","ignoreHashChangeEvent","alreadyAttached","globalThis","onhashchange","onLocationChanged","bind","silent","realLocation","location","hash","onRoute","onUnroute","routes","Route","sortedRoutes","sort","a","b","undefined","cLocation","pLocation","k","state","j","rLocation","$b407226406028221$var$elementPrototypes","$b407226406028221$var$elementClasses","$b407226406028221$var$Element","events","evt","opts","source","dataset","action","split","continuePropagation","enter","_list_watch","_list_visible","_list_property","root","isRoot","style","display","eid","Math","random","toString","substr","model","tmp","setModel","reverse","forEach","init","debug","console","log","tagName","parentElement","bindEvents","toLowerCase","appendChild","document","createElement","markReady","list","readyLocked","isReady","collectWatchers","ref","getFieldByPath","Object","keys","ready","findCustomParent","checkReady","rootReady","getRoot","onRefAdded","elem","rready","readyReenter","remove","childNodes","result","evaluate","XPathResult","ANY_TYPE","iterateNext","path","$parcel$global","shift","findRoot","update","$5m6ff$Rinn","ensureTypeOf","modelt","onModelPreChanged","onModelPropertyChanging","onModelPropertyPreChanged","onModelPropertyRemoved","setNamespace","classString","trim","classList","add","styleString","indexOf","name","getBoundingClientRect","width","height","evtstr","hdl","typeOf","selector","listen","keyCode","target","HTMLElement","call","detail","elems","querySelectorAll","preventDefault","stopPropagation","eventName","eventCatcher","eventImmediate","callback0","callback1","self","firstCapture","firstCaptureCount","queue","_eventHandler","q","pop","removed","MouseEvent","bubbles","CustomEvent","createEventObject","innerHTML","modified","_list_watch_length","_list_visible_length","_list_property_length","i3","_template","$5m6ff$Template","compile","_watch","RegExp","watch","removeAttribute","selfWatch","i1","_visible","visible","selfVisible","i2","onchange","onblur","type","checked","getModel","set","getValue","onmouseup","property","selfProperty","filter","element","get","fields","test","data","i4","removeProperty","setProperty","trigger","val","setValue","proto","__prototypePrepared","startsWith","protos","newElement","srcElement","connectReference","flags","connectedCallback","invokeConstructor","onConnected","xref","disconnectedCallback","onRefRemoved","onDisconnected","constructor","super","entries","prototype","onCreated","override","clone","__check","__init","__ready","__rready","i5","f","preparePrototype","fetch","$5m6ff$nodefetch","$1fccb40da6a8a4c5$var$Api","REQUEST_PACKAGE_SUPPORTED","REQ64_SUPPORTED","JSON_RESPONSE_SUPPORTED","XML_RESPONSE_SUPPORTED","INCLUDE_CREDENTIALS","apiUrl","retries","headers","_requestLevel","_packageData","res","req","_requestPackage","callback","responseCallback","packageBegin","packageEnd","rpkg","$5m6ff$base64","encode","encodeParams","_showProgress","_hideProgress","response","responseFilter","e","documentElement","setTimeout","obj","FormData","s","encodeURIComponent","join","success","failure","httpMethod","Date","now","toUpperCase","options","method","body","multipart","credentials","Blob","endsWith","File","append","useReq64","l","url","then","decodeResult","catch","err","apiCall","className","debounceDelay","request","includeCount","includeEnum","includeList","count","basePath","config","assign","$5m6ff$Model","$5m6ff$ModelList","dataSource","enum","forwardRequestEvent","forwardListEvent","forwardEnumEvent","prepareEvent","setSource","resume","mode","_timeout","clearTimeout","fn","$1fccb40da6a8a4c5$export$2e2bcd8739ae039","fetchCount","fetchEnum","fetchList","forced","Promise","resolve","reject","find","item","fetchOne","r","fetchDelete","error","setData","ModelList","dataList","_callback","$ba46b473d62aab0b$var$Easing","interpolate","src","dst","duration","easing","time","x","lastTime","dt","interpolator","curTime","t","requestAnimationFrame","Linear","IN","OUT","IN_OUT","Back","Bounce","getConst","Circ","sqrt","Cubic","Expo","pow","Power","p","Quad","Quartic","Quintic","Sine","sin","cos","Step","$ba46b473d62aab0b$export$2e2bcd8739ae039","$9ba65c88d69cd60f$var$Anim","$5m6ff$Class","initialData","stack","block","timeScale","blockTime","index","paused","finished","onFinishedCallback","onUpdatedCallback","reset","__dtor","onFinished","onUpdated","handle","initial","speed","setOutput","pause","clearInterval","setInterval","_block","_index","_blockTime","cmd","op","started","blocks","indices","blockTimes","n","_count","field","startValue","_startValue","_endValue","endValue","last","cur","table","snd","play","parallel","serial","repeat","end","restart","wait","range","rand","randt","c","$9ba65c88d69cd60f$export$2e2bcd8739ae039","$73574471201cbb48$export$2e2bcd8739ae039","$b407226406028221$export$2e2bcd8739ae039","register","container","baseRoute","$864a0b94480365d3$export$2e2bcd8739ae039","selectTab","_routeHandler","link","href","showTab","tabName","previousElementSibling","nextElementSibling","querySelector","_hideTabsExcept","addRoute","removeRoute","exceptName","dispatch","el","$76b1bae961eeac4f$export$2e2bcd8739ae039","formElement","def","names","default","defaults","clearMarkers","filterString","messages","eval","_change","createEvent","initEvent","fireEvent","_setField","multiple","parseInt","FileList","_getField","_value","fromFileFields","files","getField","_fieldChanged","onModelPropertyChanged","_onSuccess","message","onanimationend","_onFailure","tmp1","errorsAt","prepend","insertBefore","nsilent","submit","contains","strict","f1","formAction","_method","$52afb1de75319ece$export$2e2bcd8739ae039","_onActivate","show","_onDeactivate","hide","window","$4d1e6aff3b7dda15$export$2e2bcd8739ae039","template","isEmpty","isDynamicTemplate","template_elem","textContent","setEmpty","setLoading","setList","isInstanceOf","onLoading","onLoaded","onItemsCleared","onItemsChanged","onItemRemoved","onItemChanged","onItemAdded","buildItem","iid","asHtml","html","attr","attributes","nodeName","setAttribute","nodeValue","getData","wrap","itemId","id","position","refresh","$d24810832639488f$export$2e2bcd8739ae039","$aa4c780c2e54e10e$export$2e2bcd8739ae039","offsetStart","offsetEnd","offset","currentPageSize","pageSize","updateOffset","$4c6bf3268ceb49fd$export$2e2bcd8739ae039","onRequestPropertyChanged","onCountChanged","min","getInt","_offset","prevPage","offs","nextPage","firstPage","lastPage","clear","$277147db04c5afd0$export$2e2bcd8739ae039","Error","temporalBody","order","firstElementChild","_elem","replaceChild","$cf48d9ac8cb488b0$export$2e2bcd8739ae039","lastElementChild","label","has","blank","groups","values","g","$7c04cbce233ed828$var$Utils","showDownload","filename","dataUrl","download","click","removeChild","showFilePicker","allowMultiple","accept","input","onfocus","loadAsDataUrl","file","reader","FileReader","onload","onerror","readAsDataURL","loadAsText","readAsText","loadAsArrayBuffer","readAsArrayBuffer","loadAllAsDataUrl","fileList","loadNext","size","loadImageFromUrl","image","Image","$7c04cbce233ed828$export$2e2bcd8739ae039","$89fd5f7b8c8c2b9a$export$2e2bcd8739ae039","aspectRatio","imageScale0","imageScale","imageOffsX","imageOffsY","pointerA","pointerB","bounds","canvas","getContext","sx","sy","cx","cy","ix","iy","setImageUrl","setImage","setImageFile","max","render","getBlobAndUrl","quality","toBlob","blob","URL","createObjectURL","fillStyle","beginPath","rect","fill","translate","scale","drawImage","translateImage","offsX","offsY","clientX","clientY","left","top","deltaY","changedTouches","identifier","d0","d","$bb627624112967de$export$55185c17a0fcbe46","$bb627624112967de$export$db77ccec0bb4ccac","$bb627624112967de$export$9864de54bd63ed8a","$bb627624112967de$export$bf71da7aebe9ddc1","$bb627624112967de$export$accd73d198d77d2f","$bb627624112967de$export$d3568da47c78d35c","$3afe138de7653289$export$2e2bcd8739ae039","$bb627624112967de$export$cea96571ebbff9dd","$bb627624112967de$export$deefd61317ad2797","$bb627624112967de$export$3abb4be70fa2c84e","Tabs","Form","Panel","List","Item","Paginator","Table","Select","ImageCropper","$bb627624112967de$export$d2ca453b913dcdea","$bb627624112967de$export$eefcfe56efaaa57d","$bb627624112967de$export$4c85e640eb41c31b","$bb627624112967de$export$d61e24a684f9e51","$5m6ff$Event","$bb627624112967de$export$ec8b666c5fe2c75a","$bb627624112967de$export$a1edc412be3e1841","$bb627624112967de$export$59eced47f477f85a","$bb627624112967de$export$19342e026b58ebb7","$5m6ff$Schema","$bb627624112967de$export$3a9581c9ade29768","$5m6ff$Flattenable","$bb627624112967de$export$fb8073518f34e6ec","$5m6ff$Collection","$bb627624112967de$export$14416b8d99d47caa"],"version":3,"file":"riza.js.map"}